<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.25">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Arbeidskrav_4_DataScience</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="Arbeidskrav_4_DataScience_files/libs/clipboard/clipboard.min.js"></script>
<script src="Arbeidskrav_4_DataScience_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="Arbeidskrav_4_DataScience_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="Arbeidskrav_4_DataScience_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="Arbeidskrav_4_DataScience_files/libs/quarto-html/popper.min.js"></script>
<script src="Arbeidskrav_4_DataScience_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Arbeidskrav_4_DataScience_files/libs/quarto-html/anchor.min.js"></script>
<link href="Arbeidskrav_4_DataScience_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Arbeidskrav_4_DataScience_files/libs/quarto-html/quarto-syntax-highlighting-7b89279ff1a6dce999919e0e67d4d9ec.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Arbeidskrav_4_DataScience_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Arbeidskrav_4_DataScience_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Arbeidskrav_4_DataScience_files/libs/bootstrap/bootstrap-d6a003b94517c951b2d65075d42fb01b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="Arbeidskrav_4_DataScience_files/libs/tabwid-1.1.3/tabwid.css" rel="stylesheet">
<script src="Arbeidskrav_4_DataScience_files/libs/tabwid-1.1.3/tabwid.js"></script>


</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="Arbeidskrav_4_DataScience.pdf"><i class="bi bi-file-pdf"></i>Typst</a></li><li><a href="Arbeidskrav_4_DataScience.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Arbeidskrav_4_DataScience</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(restatapi)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(DescTools)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(modelr)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plm)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sandwich)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="fu">Sys.info</span>()[<span class="st">"sysname"</span>] <span class="sc">==</span> <span class="st">"Windows"</span>) <span class="fu">Sys.setlocale</span>(<span class="st">"LC_ALL"</span>, <span class="st">"Norwegian"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Oppgaven handler om å hente regionale tall fra Eurostat direkte inn i R ved hjelp av et API. Daten brukes til å analysere økonomiske forskjeller mellom regioner i Europa. Arbeidskravet vil dermed ha:</p>
<ul>
<li><p>Henter data på laveste regionale nivå (NUTS3)</p></li>
<li><p>Summerer (aggregerer) dataene oppover til NUTS2, NUTS1 og til slutt landnivå</p></li>
<li><p>Ser på BNP, befolkning og BNP per innbygger</p></li>
<li><p>Beregning av Gini-koeffisient for å måle ulikhet mellom regioner</p>
<ul>
<li><p>Innen hvert land (Mellom regioner)</p></li>
<li><p>Samlet for EU + utvalgte søkerland</p></li>
</ul></li>
<li><p>Dataene dekker perioden 2000 - 2023</p></li>
<li><p>Bruker tidyverse og list-columns for å organisere dataene ryddig, slik at hver rad kan inneholde egne datasett (nested tibbles).</p></li>
</ul>
<section id="toc.-eurostat" class="level2">
<h2 class="anchored" data-anchor-id="toc.-eurostat">Toc. eurostat</h2>
<p>Her velger vi å søke i tox_txt etter tabeller med BNP (GDP) på NUTS3-nivå ved hjelp av str_detect().</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Her henter vi innholdsfortegnelsen fra Eurostat og legger det inn i en dataframe vi kaller "toc_txt"</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>toc_txt <span class="ot">&lt;-</span> <span class="fu">get_eurostat_toc</span>(<span class="at">mode =</span> <span class="st">"txt"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="gdp-nuts-3" class="level2">
<h2 class="anchored" data-anchor-id="gdp-nuts-3">GDP NUTS 3</h2>
<p>Her henter vi inholdsfortegnelsen fra Eurostat. Vi gjør dette ved å hente innholdsfortegnelsen i rent tekst format, der vi gir navnet toc_txt. Siden vi ikke vet helt om det brukes store eller småe bokstaver her, så bruker vi regex for å matche begge deler. Ved å bruke filter() velger vi tabeller som inneholder både “gdp” og “NUTS3”, og med å bruke slect() ta vi kun med kollonene title og code.</p>
<p>Tabellen vises med flextable(), som gjør at resultatene kan lett leses. For å sikre at begge ordene finnes i tittelen, bruker ci en AND-betingelse (&amp;) mellom to str_detect() uttrykk.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>gdp_tabs <span class="ot">&lt;-</span> toc_txt <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Regex AND external to regex</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">str_detect</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a> <span class="at">string =</span> title,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a> <span class="co"># For å matche både små og store bokstaver</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a> <span class="at">pattern =</span> <span class="st">'[Gg][Dd][Pp]'</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a> <span class="co"># AND vha. &amp;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a> ) <span class="sc">&amp;</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a> <span class="fu">str_detect</span>(</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a> <span class="at">string =</span> title,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a> <span class="co"># For å matche både små og store bokstaver og</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a> <span class="co"># space eller ikke før 3</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a> <span class="at">pattern =</span> <span class="st">'[Nn][Uu][Tt][Ss]</span><span class="sc">\\</span><span class="st">s*3'</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a> )</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a> ) <span class="sc">|&gt;</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(title, code)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>gdp_tabs <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(title, code) <span class="sc">|&gt;</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">flextable</span>() <span class="sc">|&gt;</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">width</span>(<span class="dv">1</span>, <span class="at">width =</span> <span class="fl">3.5</span>) <span class="sc">|&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">width</span>(<span class="dv">2</span>, <span class="at">width =</span> <span class="fl">1.5</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-a7dee99a{}.cl-a7d0d6e8{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a7dca860{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a7dcbf8a{width:3.5in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7dcbf94{width:1.5in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7dcbf95{width:3.5in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7dcbf9e{width:1.5in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7dcbf9f{width:3.5in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a7dcbfa8{width:1.5in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-a7dee99a"><thead><tr style="overflow-wrap:break-word;"><th class="cl-a7dcbf8a"><p class="cl-a7dca860"><span class="cl-a7d0d6e8">title</span></p></th><th class="cl-a7dcbf94"><p class="cl-a7dca860"><span class="cl-a7d0d6e8">code</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-a7dcbf95"><p class="cl-a7dca860"><span class="cl-a7d0d6e8">Average annual population to calculate regional GDP data (thousand persons) by NUTS 3 region</span></p></td><td class="cl-a7dcbf9e"><p class="cl-a7dca860"><span class="cl-a7d0d6e8">nama_10r_3popgdp</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a7dcbf9f"><p class="cl-a7dca860"><span class="cl-a7d0d6e8">Gross domestic product (GDP) at current market prices by NUTS 3 region</span></p></td><td class="cl-a7dcbfa8"><p class="cl-a7dca860"><span class="cl-a7d0d6e8">nama_10r_3gdp</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Her bruker tabellen med koden nama_10r_3gdp, som inneholder BNP (GDP) på NUTS3-nivå. For å se hvilken variabler og verder som finnes i datasettet, henter ci “Data Structure Definition” (DSD). Denne informasjonen brukes til å sette riktige filters i spørringen mot Eurostat. Det er spesielt viktig å bruke nuts_leve = “3” for å fikre at vi henter data på NUTS3-nivå, siden dette ikke er åpenbart dokumentert.</p>
<p>Vi Laster dermed ned «Data Structure Definition (DSD)» for tabellen med kode nama_10r_3gdp.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># description nama_10r_3gdp</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>dsd_gdp <span class="ot">&lt;-</span> <span class="fu">get_eurostat_dsd</span>(<span class="st">"nama_10r_3gdp"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>dsd_gdp <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(concept <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'freq'</span>, <span class="st">'unit'</span>)) <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">flextable</span>() <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">width</span>(<span class="at">j =</span> <span class="dv">1</span>, <span class="at">width =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">width</span>(<span class="at">j =</span> <span class="dv">2</span>, <span class="at">width =</span> <span class="dv">2</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">width</span>(<span class="at">j =</span> <span class="dv">3</span>, <span class="at">width =</span> <span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-a8c5af06{}.cl-a8be17b4{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a8bff3fe{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a8c00c5e{width:1in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8c00c68{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8c00c72{width:1in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8c00c73{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8c00c74{width:1in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8c00c7c{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-a8c5af06"><thead><tr style="overflow-wrap:break-word;"><th class="cl-a8c00c5e"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">concept</span></p></th><th class="cl-a8c00c68"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">code</span></p></th><th class="cl-a8c00c68"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">name</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-a8c00c72"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">freq</span></p></td><td class="cl-a8c00c73"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">A</span></p></td><td class="cl-a8c00c73"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">Annual</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8c00c72"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">unit</span></p></td><td class="cl-a8c00c73"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">MIO_EUR</span></p></td><td class="cl-a8c00c73"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">Million euro</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8c00c72"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">unit</span></p></td><td class="cl-a8c00c73"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">EUR_HAB</span></p></td><td class="cl-a8c00c73"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">Euro per inhabitant</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8c00c72"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">unit</span></p></td><td class="cl-a8c00c73"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">EUR_HAB_EU27_2020</span></p></td><td class="cl-a8c00c73"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">Euro per inhabitant in percentage of the EU27 (from 2020) average</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8c00c72"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">unit</span></p></td><td class="cl-a8c00c73"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">MIO_NAC</span></p></td><td class="cl-a8c00c73"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">Million units of national currency</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8c00c72"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">unit</span></p></td><td class="cl-a8c00c73"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">MIO_PPS_EU27_2020</span></p></td><td class="cl-a8c00c73"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">Million purchasing power standards (PPS, EU27 from 2020)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8c00c72"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">unit</span></p></td><td class="cl-a8c00c73"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">PPS_EU27_2020_HAB</span></p></td><td class="cl-a8c00c73"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">Purchasing power standard (PPS, EU27 from 2020), per inhabitant</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8c00c74"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">unit</span></p></td><td class="cl-a8c00c7c"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">PPS_HAB_EU27_2020</span></p></td><td class="cl-a8c00c7c"><p class="cl-a8bff3fe"><span class="cl-a8be17b4">Purchasing power standard (PPS, EU27 from 2020), per inhabitant in percentage of the EU27 (from 2020) average</span></p></td></tr></tbody></table></div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>dsd_gdp <span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(concept <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">'geo'</span>)) <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">flextable</span>() <span class="sc">|&gt;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">width</span>(<span class="at">j =</span> <span class="dv">1</span>, <span class="at">width =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">width</span>(<span class="at">j =</span> <span class="dv">2</span>, <span class="at">width =</span> <span class="dv">2</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a> <span class="fu">width</span>(<span class="at">j =</span> <span class="dv">3</span>, <span class="at">width =</span> <span class="dv">2</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-a8d001d6{}.cl-a8cc35ba{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-a8cdb8a4{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-a8cdc8e4{width:1in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8cdc8ee{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8cdc8ef{width:1in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8cdc8f0{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8cdc8f8{width:1in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-a8cdc8f9{width:2in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-a8d001d6"><thead><tr style="overflow-wrap:break-word;"><th class="cl-a8cdc8e4"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">concept</span></p></th><th class="cl-a8cdc8ee"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">code</span></p></th><th class="cl-a8cdc8ee"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">name</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-a8cdc8ef"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">geo</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">EU27_2020</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">European Union - 27 countries (from 2020)</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8cdc8ef"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">geo</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">BE</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">Belgium</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8cdc8ef"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">geo</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">BE1</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">Région de Bruxelles-Capitale/Brussels Hoofdstedelijk Gewest</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8cdc8ef"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">geo</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">BE10</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">Région de Bruxelles-Capitale/Brussels Hoofdstedelijk Gewest</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8cdc8ef"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">geo</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">BE100</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">Arr. de Bruxelles-Capitale/Arr. Brussel-Hoofdstad</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8cdc8ef"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">geo</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">BE2</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">Vlaams Gewest</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8cdc8ef"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">geo</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">BE21</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">Prov. Antwerpen</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8cdc8ef"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">geo</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">BE211</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">Arr. Antwerpen</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8cdc8ef"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">geo</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">BE212</span></p></td><td class="cl-a8cdc8f0"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">Arr. Mechelen</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-a8cdc8f8"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">geo</span></p></td><td class="cl-a8cdc8f9"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">BE213</span></p></td><td class="cl-a8cdc8f9"><p class="cl-a8cdb8a4"><span class="cl-a8cc35ba">Arr. Turnhout</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Utfra kodene i dsd_gdpkan vi da formulere følgende spørring mot Eurostat:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Gross domestic product (GDP) at current market prices by NUTS 3 regions</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="co"># id: nama_10r_3gdp</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Vi velger å hente samtlige soner for så å filtrere ut de få vi ikke trenger</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>gdp <span class="ot">&lt;-</span> <span class="fu">get_eurostat_data</span>(</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a> <span class="at">id =</span> <span class="st">"nama_10r_3gdp"</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a> <span class="at">filters =</span> <span class="fu">list</span>(</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a> <span class="co"># neste linje viser hvordan vi kunne ha hentet ut data</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a> <span class="co"># for spesifiserte land</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a> <span class="co"># geo = c("AT", "DE", "DK", "FR"),</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a> <span class="at">nuts_level =</span> <span class="st">"3"</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a> <span class="at">unit =</span> <span class="st">"MIO_PPS_EU27_2020"</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a> ),</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a> <span class="at">exact_match =</span> <span class="cn">FALSE</span>,</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a> <span class="at">date_filter =</span> <span class="dv">2000</span><span class="sc">:</span><span class="dv">2023</span>,</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a> <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a> ) <span class="sc">|&gt;</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a> <span class="at">gdp_n3 =</span> <span class="dv">1000000</span> <span class="sc">*</span> values</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a> ) <span class="sc">|&gt;</span> </span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(unit, values)) <span class="sc">|&gt;</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a> <span class="co"># Vil bare ha NUTS 3 nivå (5 karakterer). Vil aggregere selv til NUTS2,</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a> <span class="co"># NUTS1 og NUTSc</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(<span class="fu">str_length</span>(geo) <span class="sc">==</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a> <span class="fu">as_tibble</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(gdp)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30058     3</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ag: ikke skriv 30000 observasjoner ut til skjerm</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co"># jeg har lagt til head()</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>gdp <span class="sc">|&gt;</span> <span class="fu">head</span>(<span class="at">n =</span> <span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 3
   geo   time     gdp_n3
   &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;
 1 AL011 2008  551130000
 2 AL011 2009  582160000
 3 AL011 2010  664070000
 4 AL011 2011  631170000
 5 AL011 2012  717600000
 6 AL011 2013  696860000
 7 AL011 2014  735600000
 8 AL011 2015  788630000
 9 AL011 2016  801980000
10 AL011 2017  800660000</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ag: et alternativ er å bruke `#| paged.print: false`</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>gdp</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30,058 × 3
   geo   time     gdp_n3
   &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;
 1 AL011 2008  551130000
 2 AL011 2009  582160000
 3 AL011 2010  664070000
 4 AL011 2011  631170000
 5 AL011 2012  717600000
 6 AL011 2013  696860000
 7 AL011 2014  735600000
 8 AL011 2015  788630000
 9 AL011 2016  801980000
10 AL011 2017  800660000
# ℹ 30,048 more rows</code></pre>
</div>
</div>
<p>Her har vi konvertert gdp til euro fra milioner euro. Vi vil og gi navnet gdp. Vi velger og å benytte MI0_PPS_EU27_2020 som mål på BNP.</p>
<p>Vi har et lite problem for sonen IE053. Her mangler vi gdp data for årene 2015, 2016 og 2017. Dette vil gi oss problemer senere hvis vi ikke fikser det.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>gdp <span class="sc">|&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(geo <span class="sc">==</span> <span class="st">"IE053"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 × 3
   geo   time       gdp_n3
   &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;
 1 IE053 2000  15837300000
 2 IE053 2001  17506250000
 3 IE053 2002  19395440000
 4 IE053 2003  19687190000
 5 IE053 2004  21000450000
 6 IE053 2005  21776750000
 7 IE053 2006  24081640000
 8 IE053 2007  26086890000
 9 IE053 2008  22705550000
10 IE053 2009  24012370000
# ℹ 11 more rows</code></pre>
</div>
</div>
<p>Vi legger derfor disse til gdp som NA verdier. Disse vil vi så erstatte med interpolerte verdier senere.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>ie_data <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a> <span class="at">geo =</span> <span class="fu">c</span>(<span class="st">"IE053"</span>, <span class="st">"IE053"</span>, <span class="st">"IE053"</span>),</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a> <span class="at">time =</span> <span class="fu">c</span>(<span class="st">"2015"</span>, <span class="st">"2016"</span>, <span class="st">"2017"</span>),</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a> <span class="at">gdp_n3 =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span>)</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>gdp <span class="ot">&lt;-</span> <span class="fu">rbind</span>(gdp, ie_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>gdp <span class="ot">&lt;-</span> gdp <span class="sc">|&gt;</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">arrange</span>(geo, time) <span class="sc">|&gt;</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a> <span class="at">gdp_n3 =</span> zoo<span class="sc">::</span><span class="fu">na.approx</span>(gdp_n3)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>gdp <span class="sc">|&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(geo <span class="sc">==</span> <span class="st">"IE053"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">25</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 24 × 3
   geo   time        gdp_n3
   &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt;
 1 IE053 2000   15837300000
 2 IE053 2001   17506250000
 3 IE053 2002   19395440000
 4 IE053 2003   19687190000
 5 IE053 2004   21000450000
 6 IE053 2005   21776750000
 7 IE053 2006   24081640000
 8 IE053 2007   26086890000
 9 IE053 2008   22705550000
10 IE053 2009   24012370000
11 IE053 2010   24085200000
12 IE053 2011   26235110000
13 IE053 2012   24346250000
14 IE053 2013   23345250000
15 IE053 2014   25127580000
16 IE053 2015   37267470000
17 IE053 2016   49407360000
18 IE053 2017   61547250000
19 IE053 2018   73687140000
20 IE053 2019   71965850000
21 IE053 2020   75581570000
22 IE053 2021   99064470000
23 IE053 2022  122163400000
24 IE053 2023  103989840000</code></pre>
</div>
</div>
</section>
<section id="population-demo_r_pjanaggr3" class="level2">
<h2 class="anchored" data-anchor-id="population-demo_r_pjanaggr3">Population demo_r_pjanaggr3</h2>
<section id="oppgave-1" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-1">Oppgave 1</h4>
<p>1. Søk i toc_txt for tabeller med population og NUTS 3. Pass på at dere dekker både population og Population og ulike skrivemåter for NUTS 3. Vi vil bruke befolkningstabellen som har teksten: «Average annual population to calculate regional GDP data (thousand persons) by NUTS 3 regions».</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>pop_tab <span class="ot">&lt;-</span> toc_txt <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(title, <span class="fu">regex</span>(<span class="st">"population"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">&amp;</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(title, <span class="fu">regex</span>(<span class="st">"NUTS</span><span class="sc">\\</span><span class="st">s*3"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="oppgave-2" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-2">Oppgave 2</h4>
<p>i. Finn koden for tabellen med forklarende tekst «Average annual population to calculate regional GDP data (thousand persons) by NUTS 3 regions».</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>pop_tab <span class="sc">|&gt;</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(title, <span class="fu">regex</span>(<span class="st">"population"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>)) <span class="sc">&amp;</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(title, <span class="fu">regex</span>(<span class="st">"NUTS</span><span class="sc">\\</span><span class="st">s*3"</span>, <span class="at">ignore_case =</span> <span class="cn">TRUE</span>))</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                                                                                                   title
                                                                                                                  &lt;char&gt;
 1:                                                                                  Population density by NUTS 3 region
 2:                                                          Population on 1 January by age group, sex and NUTS 3 region
 3:                                                    Population on 1 January by broad age group, sex and NUTS 3 region
 4:                                                                     Population structure indicators by NUTS 3 region
 5:                                  Population change - Demographic balance and crude rates at regional level (NUTS 3)&nbsp;
 6:                                                                   Population by single year of age and NUTS 3 region
 7:                                                                       Population by marital status and NUTS 3 region
 8:                                                                        Population by family status and NUTS 3 region
 9:                                                                     Population by sex, citizenship and NUTS 3 region
10:                                              Population by sex, age group, current activity status and NUTS 3 region
11: Total and active population by sex, age, employment status, residence one year prior to the census and NUTS 3 region
12:                Population by sex, age group, educational attainment level, current activity status and NUTS 3 region
13:                                                     Population by sex, age group, household status and NUTS 3 region
14:                                                    Population by sex, age group, size of household and NUTS 3 region
15:                         Average annual population to calculate regional GDP data (thousand persons) by NUTS 3 region
16:                                                   Population by country of citizenship, age groups and NUTS 3 region
17:                                    Population by country of citizenship, age groups, family status and NUTS 3 region
18:                     Population by country of citizenship, age groups, type of housing arrangements and NUTS 3 region
19:                                                         Population by country of birth, age groups and NUTS 3 region
20:                                       Population by country of birth, age groups, household status and NUTS 3 region
21:                           Population by country of birth, age groups, type of housing arrangements and NUTS 3 region
22:                                                     Population by marital status, broad age groups and NUTS 3 region
23:                                                      Population by family status, broad age groups and NUTS 3 region
24:                                                     Population by size of the locality, age groups and NUTS 3 region
25:                                           Population by size of the locality, housing arrangements and NUTS 3 region
26:    Population by year of arrival in the country since 2010, age groups, groups of country of birth and NUTS 3 region
27:                            Population by year of arrival in the country, age groups, family status and NUTS 3 region
28:                                          Population with Ukrainian citizenship by 5-year age group and NUTS 3 region
29:                                                       Population with Ukrainian citizenship by age and NUTS 3 region
30:                          Population with Ukrainian citizenship by 5-year age group, marital status and NUTS 3 region
31:                                          Population on 1st January by age, sex, type of projection and NUTS 3 region
                                                                                                                   title
                                                                                                                  &lt;char&gt;
                code    type lastUpdate lastModified dataStart dataEnd   values
              &lt;char&gt;  &lt;char&gt;     &lt;char&gt;       &lt;char&gt;    &lt;char&gt;  &lt;char&gt;    &lt;num&gt;
 1:    demo_r_d3dens dataset 2025.04.02   2025.04.02      1990    2023    55417
 2:  demo_r_pjangrp3 dataset 2025.12.04   2025.02.14      2014    2024  1386851
 3: demo_r_pjanaggr3 dataset 2025.12.04   2025.02.14      1990    2024   709822
 4:  demo_r_pjanind3 dataset 2025.12.04   2025.02.14      2014    2024  1031936
 5:     demo_r_gind3 dataset 2025.10.10   2025.03.27      2000    2024   462291
 6:     cens_11ag_r3 dataset 2015.08.26   2024.01.10      2011    2011   722521
 7:     cens_11ms_r3 dataset 2019.04.01   2024.01.10      2011    2011  1391604
 8:     cens_11fs_r3 dataset 2015.08.26   2024.01.10      2011    2011  1409421
 9:     cens_01rsctz dataset 2009.03.27   2024.01.03      2001    2001    77613
10:     cens_01rapop dataset 2009.03.27   2024.10.11      2001    2001   555759
11:    cens_01ramigr dataset 2009.03.27   2024.01.03      2001    2001  1482371
12:      cens_01rews dataset 2009.03.27   2024.10.14      2001    2001   210708
13:    cens_01rhtype dataset 2009.03.27   2024.01.03      2001    2001   354029
14:    cens_01rhsize dataset 2011.02.09   2024.01.03      2001    2001   288476
15: nama_10r_3popgdp dataset 2025.03.12   2025.02.11      2000    2023    40358
16:    cens_21ctz_r3 dataset 2025.05.21   2025.05.21      2021    2021 31169981
17:   cens_21ctzf_r3 dataset 2025.05.21   2025.05.21      2021    2021  5931246
18:  cens_21ctzha_r3 dataset 2025.05.21   2025.05.21      2021    2021  3670227
19:    cens_21cob_r3 dataset 2025.05.21   2025.05.21      2021    2021 34416168
20:  cens_21cobhs_r3 dataset 2025.05.21   2025.05.21      2021    2021  7912772
21:  cens_21cobha_r3 dataset 2025.05.21   2025.05.21      2021    2021  3671639
22:      cens_21m_r3 dataset 2025.05.21   2025.05.21      2021    2021   212370
23:      cens_21f_r3 dataset 2025.05.21   2025.05.21      2021    2021   424168
24:      cens_21l_r3 dataset 2025.05.21   2025.05.21      2021    2021  1982428
25:    cens_21lha_r3 dataset 2025.05.21   2025.05.21      2021    2021   424891
26:   cens_21argc_r3 dataset 2025.05.21   2025.05.21      2021    2021  3958020
27:    cens_21arf_r3 dataset 2025.05.21   2025.05.21      2021    2021  4591462
28:   cens_21ua_a5r3 dataset 2023.03.13   2023.03.13      2021    2021    20511
29:    cens_21ua_ar3 dataset 2023.03.13   2023.03.13      2021    2021    54936
30:   cens_21ua_msr3 dataset 2022.07.07   2022.07.07      2021    2021    34680
31:       proj_19rp3 dataset 2021.04.23   2024.01.10      2019    2100 91535616
                code    type lastUpdate lastModified dataStart dataEnd   values
              &lt;char&gt;  &lt;char&gt;     &lt;char&gt;       &lt;char&gt;    &lt;char&gt;  &lt;char&gt;    &lt;num&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>pop_tab <span class="sc">|&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>      title,</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">fixed</span>(<span class="st">"Average annual population to calculate regional GDP data (thousand persons) by NUTS 3 region"</span>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(code)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>               code
             &lt;char&gt;
1: nama_10r_3popgdp</code></pre>
</div>
</div>
<ol start="2" type="i">
<li>Last ned Data Structure Definition (DSD) for denne tabellen.</li>
</ol>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Så laster vi ned DSD for tabellen vi fant over.</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>dsd_pop <span class="ot">&lt;-</span> <span class="fu">get_eurostat_dsd</span>(<span class="st">"nama_10r_3popgdp"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<ol start="3" type="i">
<li>Bruk opplysningene i DSD for å formulere en spørring mot Eurostat og last ned dataene. Gi dataene lastet ned navnet pop. Vi er bare interessert i totalbefolkning og ignorerer derfor både kjønn og alder. Vi ønsker data for årene 2000-2023.</li>
</ol>
<!-- -->
<ol start="4" type="i">
<li><p>Bruk filter(str_length(geo) == 5) for å begrense datasettet til NUTS3 regioner. Vi vil gjøre vår egen aggregering.</p></li>
<li><p>Hent data for samtlige land, dvs. vi trenger ikke sette noe filter for geo. Husk å konverter til tibble vha. as_tibble().</p></li>
</ol>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>pop <span class="ot">&lt;-</span> <span class="fu">get_eurostat_data</span>(</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a> <span class="at">id =</span> <span class="st">"nama_10r_3popgdp"</span>,</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a> <span class="at">filters =</span> <span class="fu">list</span>(</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a> <span class="at">nuts_level =</span> <span class="st">"3"</span>,</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a> <span class="at">unit =</span> <span class="st">"THS"</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a> ),</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a> <span class="at">exact_match =</span> <span class="cn">FALSE</span>,</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a> <span class="at">date_filter =</span> <span class="dv">2000</span><span class="sc">:</span><span class="dv">2023</span>,</span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a> <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a> ) <span class="sc">|&gt;</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(</span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a> <span class="at">pop_n3 =</span> values <span class="sc">*</span> <span class="dv">1000</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a> ) <span class="sc">|&gt;</span> </span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(unit, values)) <span class="sc">|&gt;</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(<span class="fu">str_length</span>(geo) <span class="sc">==</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a> <span class="fu">as_tibble</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(pop)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30038     3</code></pre>
</div>
</div>
</section>
<section id="oppgave-3" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-3">Oppgave 3</h4>
<p>Gjør en left_join() av de to tabellene. La gdp være venstre tabell (Viktig!). Gi resultatet navnet gdp_pop.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>gdp_pop <span class="ot">&lt;-</span> <span class="fu">left_join</span>(</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  gdp,</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  pop,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"geo"</span>, <span class="st">"time"</span>)</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(gdp_pop)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 30061     4</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ag: igjen paged.print: false gjør susen</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>gdp_pop</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30,061 × 4
   geo   time     gdp_n3 pop_n3
   &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;
 1 AL011 2008  551130000 155390
 2 AL011 2009  582160000 150430
 3 AL011 2010  664070000 146140
 4 AL011 2011  631170000 142580
 5 AL011 2012  717600000 139340
 6 AL011 2013  696860000 136020
 7 AL011 2014  735600000 132690
 8 AL011 2015  788630000 130050
 9 AL011 2016  801980000 127320
10 AL011 2017  800660000 123290
# ℹ 30,051 more rows</code></pre>
</div>
</div>
<p>Gjør følgende tilpasning av gdp_pop og legger resultatet i variabelen eu_data.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>eu_data <span class="ot">&lt;-</span> gdp_pop <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a> <span class="co"># Trenger ikke ZZ sonene som er en slag oppsamlingssone</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a> <span class="co"># for ikke fordelte verdier</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_sub</span>(geo, <span class="dv">3</span>, <span class="dv">4</span>) <span class="sc">==</span> <span class="st">"ZZ"</span>) <span class="sc">|&gt;</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a> <span class="co"># Drop the EFTA countries Switzerland and Norway</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_sub</span>(geo, <span class="dv">1</span>, <span class="dv">2</span>) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"CH"</span>, <span class="st">"NO"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a> <span class="co"># Drop the EU countries Netherlands and Portugal</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_sub</span>(geo, <span class="dv">1</span>, <span class="dv">2</span>) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"NL"</span>, <span class="st">"PT"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a> <span class="co"># Drop candidate country Monte Negro because of data</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">str_sub</span>(geo, <span class="dv">1</span>, <span class="dv">2</span>) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"ME"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a> <span class="co"># Drop a region of France in the Indian Ocean (Outre Mer); Mayotte</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a> <span class="co"># because of missing data</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(<span class="sc">!</span>geo <span class="sc">==</span> <span class="st">"FRY50"</span>) <span class="sc">|&gt;</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a> <span class="co"># note that a few countries will have missing data for</span></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a> <span class="co"># some years at the start of the period</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(time <span class="sc">&gt;</span> <span class="dv">1999</span> <span class="sc">&amp;</span> time <span class="sc">&lt;</span> <span class="dv">2023</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Regn ut gdp per capita og kaller variabelen gdp_pc_n3.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>eu_data <span class="ot">&lt;-</span> eu_data <span class="sc">|&gt;</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">gdp_pc_n3 =</span> gdp_n3 <span class="sc">/</span> pop_n3</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(eu_data)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 27584     5</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>miss_eu <span class="ot">&lt;-</span> eu_data <span class="sc">%&gt;%</span> </span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">complete.cases</span>(.))</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(miss_eu)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 5</code></pre>
</div>
</div>
</section>
<section id="oppgave-4" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-4">Oppgave 4</h4>
<p>Endre navnet på variabelen geo til n3 og lag variablene n2 (NUTS2), n1 (NUTS1) og nc (for «Country») fra variabelen n3. Funksjonen str_sub() fra stringr pakken kan her være hendig å bruke.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>eu_data <span class="ot">&lt;-</span> eu_data <span class="sc">|&gt;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">n3 =</span> geo</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">n2 =</span> <span class="fu">str_sub</span>(n3, <span class="dv">1</span>, <span class="dv">4</span>), <span class="co">#Adding column for NUTS2</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">n1 =</span> <span class="fu">str_sub</span>(n3, <span class="dv">1</span>, <span class="dv">3</span>), <span class="co">#NUTS1</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">nc =</span> <span class="fu">str_sub</span>(n3, <span class="dv">1</span>, <span class="dv">2</span>) <span class="co"># And finally country.s</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="oppgave-5" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-5">Oppgave 5</h4>
<p>Undersøk om vi har noen NUTS 3 soner med pop_n3 lik 0. Hvis det er noen så endre disse til NA.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sjekker om det finnes soner uten befolkning. Så synes ikke, og livet går videre. </span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>eu_data <span class="sc">|&gt;</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(pop_n3 <span class="sc">==</span> <span class="dv">0</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 8
# ℹ 8 variables: n3 &lt;chr&gt;, time &lt;chr&gt;, gdp_n3 &lt;dbl&gt;, pop_n3 &lt;dbl&gt;,
#   gdp_pc_n3 &lt;dbl&gt;, n2 &lt;chr&gt;, n1 &lt;chr&gt;, nc &lt;chr&gt;</code></pre>
</div>
</div>
</section>
<section id="oppgave-6" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-6">Oppgave 6</h4>
<p>Sjekker hvor mange NUTS3 soner vi har i hvert land.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ag: dere må sette max_row, ellers får dere bare med de 10 første</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="co"># tabellen blir litt lang. Se under for forslag til kode som lager en mer</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a><span class="co"># kompakt tabell</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>eu_data <span class="sc">|&gt;</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(nc, n3)<span class="sc">|&gt;</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(nc, <span class="at">name =</span><span class="st">"antall_nuts3"</span>)<span class="sc">|&gt;</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_flextable</span>(</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">show_coltype =</span> <span class="cn">FALSE</span>,</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">max_row =</span> <span class="dv">30</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">line_spacing</span>(<span class="at">space =</span> <span class="fl">0.3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-b28463ac{}.cl-b27f9e62{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-b2821a7a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b2821a84{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b2821a85{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 0.3;background-color:transparent;}.cl-b2821a8e{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 0.3;background-color:transparent;}.cl-b2822c0e{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c0f{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c18{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c2c{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c2d{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c36{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c37{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c38{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c40{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c41{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c4a{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c54{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c55{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c5e{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c68{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c69{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c6a{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c6b{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c72{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c73{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c7c{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c7d{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c86{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c87{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c88{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b2822c90{width:1.109in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-b28463ac"><thead><tr style="overflow-wrap:break-word;"><th class="cl-b2822c0e"><p class="cl-b2821a7a"><span class="cl-b27f9e62">nc</span></p></th><th class="cl-b2822c0f"><p class="cl-b2821a84"><span class="cl-b27f9e62">antall_nuts3</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-b2822c18"><p class="cl-b2821a85"><span class="cl-b27f9e62">AL</span></p></td><td class="cl-b2822c2c"><p class="cl-b2821a8e"><span class="cl-b27f9e62">12</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c2d"><p class="cl-b2821a85"><span class="cl-b27f9e62">AT</span></p></td><td class="cl-b2822c36"><p class="cl-b2821a8e"><span class="cl-b27f9e62">35</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c18"><p class="cl-b2821a85"><span class="cl-b27f9e62">BE</span></p></td><td class="cl-b2822c2c"><p class="cl-b2821a8e"><span class="cl-b27f9e62">44</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c37"><p class="cl-b2821a85"><span class="cl-b27f9e62">BG</span></p></td><td class="cl-b2822c38"><p class="cl-b2821a8e"><span class="cl-b27f9e62">28</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c40"><p class="cl-b2821a85"><span class="cl-b27f9e62">CY</span></p></td><td class="cl-b2822c41"><p class="cl-b2821a8e"><span class="cl-b27f9e62">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c40"><p class="cl-b2821a85"><span class="cl-b27f9e62">CZ</span></p></td><td class="cl-b2822c41"><p class="cl-b2821a8e"><span class="cl-b27f9e62">14</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c4a"><p class="cl-b2821a85"><span class="cl-b27f9e62">DE</span></p></td><td class="cl-b2822c54"><p class="cl-b2821a8e"><span class="cl-b27f9e62">400</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c18"><p class="cl-b2821a85"><span class="cl-b27f9e62">DK</span></p></td><td class="cl-b2822c2c"><p class="cl-b2821a8e"><span class="cl-b27f9e62">11</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c18"><p class="cl-b2821a85"><span class="cl-b27f9e62">EE</span></p></td><td class="cl-b2822c2c"><p class="cl-b2821a8e"><span class="cl-b27f9e62">5</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c2d"><p class="cl-b2821a85"><span class="cl-b27f9e62">EL</span></p></td><td class="cl-b2822c36"><p class="cl-b2821a8e"><span class="cl-b27f9e62">52</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c55"><p class="cl-b2821a85"><span class="cl-b27f9e62">ES</span></p></td><td class="cl-b2822c5e"><p class="cl-b2821a8e"><span class="cl-b27f9e62">59</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c68"><p class="cl-b2821a85"><span class="cl-b27f9e62">FI</span></p></td><td class="cl-b2822c69"><p class="cl-b2821a8e"><span class="cl-b27f9e62">19</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c6a"><p class="cl-b2821a85"><span class="cl-b27f9e62">FR</span></p></td><td class="cl-b2822c6b"><p class="cl-b2821a8e"><span class="cl-b27f9e62">100</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c18"><p class="cl-b2821a85"><span class="cl-b27f9e62">HR</span></p></td><td class="cl-b2822c2c"><p class="cl-b2821a8e"><span class="cl-b27f9e62">21</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c72"><p class="cl-b2821a85"><span class="cl-b27f9e62">HU</span></p></td><td class="cl-b2822c73"><p class="cl-b2821a8e"><span class="cl-b27f9e62">20</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c7c"><p class="cl-b2821a85"><span class="cl-b27f9e62">IE</span></p></td><td class="cl-b2822c7d"><p class="cl-b2821a8e"><span class="cl-b27f9e62">8</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c6a"><p class="cl-b2821a85"><span class="cl-b27f9e62">IT</span></p></td><td class="cl-b2822c6b"><p class="cl-b2821a8e"><span class="cl-b27f9e62">107</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c6a"><p class="cl-b2821a85"><span class="cl-b27f9e62">LT</span></p></td><td class="cl-b2822c6b"><p class="cl-b2821a8e"><span class="cl-b27f9e62">10</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c72"><p class="cl-b2821a85"><span class="cl-b27f9e62">LU</span></p></td><td class="cl-b2822c73"><p class="cl-b2821a8e"><span class="cl-b27f9e62">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c18"><p class="cl-b2821a85"><span class="cl-b27f9e62">LV</span></p></td><td class="cl-b2822c2c"><p class="cl-b2821a8e"><span class="cl-b27f9e62">5</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c7c"><p class="cl-b2821a85"><span class="cl-b27f9e62">MK</span></p></td><td class="cl-b2822c7d"><p class="cl-b2821a8e"><span class="cl-b27f9e62">8</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c18"><p class="cl-b2821a85"><span class="cl-b27f9e62">MT</span></p></td><td class="cl-b2822c2c"><p class="cl-b2821a8e"><span class="cl-b27f9e62">2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c2d"><p class="cl-b2821a85"><span class="cl-b27f9e62">PL</span></p></td><td class="cl-b2822c36"><p class="cl-b2821a8e"><span class="cl-b27f9e62">73</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c55"><p class="cl-b2821a85"><span class="cl-b27f9e62">RO</span></p></td><td class="cl-b2822c5e"><p class="cl-b2821a8e"><span class="cl-b27f9e62">42</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c55"><p class="cl-b2821a85"><span class="cl-b27f9e62">RS</span></p></td><td class="cl-b2822c5e"><p class="cl-b2821a8e"><span class="cl-b27f9e62">25</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c55"><p class="cl-b2821a85"><span class="cl-b27f9e62">SE</span></p></td><td class="cl-b2822c5e"><p class="cl-b2821a8e"><span class="cl-b27f9e62">21</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c55"><p class="cl-b2821a85"><span class="cl-b27f9e62">SI</span></p></td><td class="cl-b2822c5e"><p class="cl-b2821a8e"><span class="cl-b27f9e62">12</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c55"><p class="cl-b2821a85"><span class="cl-b27f9e62">SK</span></p></td><td class="cl-b2822c5e"><p class="cl-b2821a8e"><span class="cl-b27f9e62">8</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b2822c86"><p class="cl-b2821a85"><span class="cl-b27f9e62">TR</span></p></td><td class="cl-b2822c87"><p class="cl-b2821a8e"><span class="cl-b27f9e62">81</span></p></td></tr></tbody><tfoot><tr style="overflow-wrap:break-word;"><td colspan="2" class="cl-b2822c88"><p class="cl-b2821a7a"><span class="cl-b27f9e62">n: 29</span></p></td></tr></tfoot></table></div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>eu_data <span class="sc">|&gt;</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>(nc, n3)<span class="sc">|&gt;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(nc, <span class="at">name =</span><span class="st">"antall_nuts3"</span>) <span class="sc">|&gt;</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>()  <span class="sc">|&gt;</span> </span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>()  <span class="sc">|&gt;</span> </span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_row</span>() <span class="sc">%&gt;%</span></span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">p1 =</span> <span class="fu">slice</span>(., <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span>),</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">p2 =</span> <span class="fu">slice</span>(., <span class="dv">9</span><span class="sc">:</span><span class="dv">16</span>),</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">p3 =</span> <span class="fu">slice</span>(., <span class="dv">17</span><span class="sc">:</span><span class="dv">24</span>),</span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">p4 =</span> <span class="fu">slice</span>(., <span class="dv">25</span><span class="sc">:</span><span class="dv">32</span>)</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>  } <span class="sc">|&gt;</span> </span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>() <span class="sc">|&gt;</span> </span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flextable</span>() <span class="sc">|&gt;</span> </span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_table_properties</span>(</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">opts_pdf =</span> <span class="fu">list</span>(</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>      <span class="at">arraystretch =</span> <span class="fl">0.8</span></span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>      )</span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_header_labels</span>(</span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">nc...1 =</span> <span class="st">"Land</span><span class="sc">\n</span><span class="st">kode"</span>,</span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">antall_nuts3...2 =</span> <span class="st">"Antall</span><span class="sc">\n</span><span class="st">nuts3"</span>,</span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">nc...3 =</span> <span class="st">"Land</span><span class="sc">\n</span><span class="st">kode"</span>,</span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">antall_nuts3...4 =</span> <span class="st">"Antall</span><span class="sc">\n</span><span class="st">nuts3"</span>,</span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">nc...5 =</span> <span class="st">"Land</span><span class="sc">\n</span><span class="st">kode"</span>,</span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">antall_nuts3...6 =</span> <span class="st">"Antall</span><span class="sc">\n</span><span class="st">nuts3"</span>,</span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">nc...7 =</span> <span class="st">"Land</span><span class="sc">\n</span><span class="st">kode"</span>,</span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">antall_nuts3...8 =</span> <span class="st">"Antall</span><span class="sc">\n</span><span class="st">nuts3"</span></span>
<span id="cb47-31"><a href="#cb47-31" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb47-32"><a href="#cb47-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">line_spacing</span>(<span class="at">space =</span> <span class="fl">0.5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb47-33"><a href="#cb47-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autofit</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-b29e4f38{}.cl-b299d278{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-b29b4a90{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b29b4a91{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b29b4a9a{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 0.5;background-color:transparent;}.cl-b29b4a9b{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 0.5;background-color:transparent;}.cl-b29b5b20{width:0.625in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b29b5b48{width:0.667in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b29b5b49{width:0.625in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b29b5b52{width:0.667in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b29b5b53{width:0.625in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b29b5b5c{width:0.667in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b29b5b5d{width:0.625in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b29b5b66{width:0.667in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b29b5b67{width:0.625in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b29b5b70{width:0.667in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-b29e4f38"><thead><tr style="overflow-wrap:break-word;"><th class="cl-b29b5b20"><p class="cl-b29b4a90"><span class="cl-b299d278">Land</span><br><span class="cl-b299d278">kode</span></p></th><th class="cl-b29b5b48"><p class="cl-b29b4a91"><span class="cl-b299d278">Antall</span><br><span class="cl-b299d278">nuts3</span></p></th><th class="cl-b29b5b20"><p class="cl-b29b4a90"><span class="cl-b299d278">Land</span><br><span class="cl-b299d278">kode</span></p></th><th class="cl-b29b5b48"><p class="cl-b29b4a91"><span class="cl-b299d278">Antall</span><br><span class="cl-b299d278">nuts3</span></p></th><th class="cl-b29b5b20"><p class="cl-b29b4a90"><span class="cl-b299d278">Land</span><br><span class="cl-b299d278">kode</span></p></th><th class="cl-b29b5b48"><p class="cl-b29b4a91"><span class="cl-b299d278">Antall</span><br><span class="cl-b299d278">nuts3</span></p></th><th class="cl-b29b5b20"><p class="cl-b29b4a90"><span class="cl-b299d278">Land</span><br><span class="cl-b299d278">kode</span></p></th><th class="cl-b29b5b48"><p class="cl-b29b4a91"><span class="cl-b299d278">Antall</span><br><span class="cl-b299d278">nuts3</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">AL</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">12</span></p></td><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">EE</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">5</span></p></td><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">IT</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">107</span></p></td><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">RS</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">25</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">AT</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">35</span></p></td><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">EL</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">52</span></p></td><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">LT</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">10</span></p></td><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">SE</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">21</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">BE</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">44</span></p></td><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">ES</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">59</span></p></td><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">LU</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">1</span></p></td><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">SI</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">12</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">BG</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">28</span></p></td><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">FI</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">19</span></p></td><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">LV</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">5</span></p></td><td class="cl-b29b5b49"><p class="cl-b29b4a9a"><span class="cl-b299d278">SK</span></p></td><td class="cl-b29b5b52"><p class="cl-b29b4a9b"><span class="cl-b299d278">8</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b29b5b53"><p class="cl-b29b4a9a"><span class="cl-b299d278">CY</span></p></td><td class="cl-b29b5b5c"><p class="cl-b29b4a9b"><span class="cl-b299d278">1</span></p></td><td class="cl-b29b5b53"><p class="cl-b29b4a9a"><span class="cl-b299d278">FR</span></p></td><td class="cl-b29b5b5c"><p class="cl-b29b4a9b"><span class="cl-b299d278">100</span></p></td><td class="cl-b29b5b53"><p class="cl-b29b4a9a"><span class="cl-b299d278">MK</span></p></td><td class="cl-b29b5b5c"><p class="cl-b29b4a9b"><span class="cl-b299d278">8</span></p></td><td class="cl-b29b5b53"><p class="cl-b29b4a9a"><span class="cl-b299d278">TR</span></p></td><td class="cl-b29b5b5c"><p class="cl-b29b4a9b"><span class="cl-b299d278">81</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b29b5b53"><p class="cl-b29b4a9a"><span class="cl-b299d278">CZ</span></p></td><td class="cl-b29b5b5c"><p class="cl-b29b4a9b"><span class="cl-b299d278">14</span></p></td><td class="cl-b29b5b53"><p class="cl-b29b4a9a"><span class="cl-b299d278">HR</span></p></td><td class="cl-b29b5b5c"><p class="cl-b29b4a9b"><span class="cl-b299d278">21</span></p></td><td class="cl-b29b5b53"><p class="cl-b29b4a9a"><span class="cl-b299d278">MT</span></p></td><td class="cl-b29b5b5c"><p class="cl-b29b4a9b"><span class="cl-b299d278">2</span></p></td><td class="cl-b29b5b53"><p class="cl-b29b4a9a"><span class="cl-b299d278"></span></p></td><td class="cl-b29b5b5c"><p class="cl-b29b4a9b"><span class="cl-b299d278"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b29b5b5d"><p class="cl-b29b4a9a"><span class="cl-b299d278">DE</span></p></td><td class="cl-b29b5b66"><p class="cl-b29b4a9b"><span class="cl-b299d278">400</span></p></td><td class="cl-b29b5b5d"><p class="cl-b29b4a9a"><span class="cl-b299d278">HU</span></p></td><td class="cl-b29b5b66"><p class="cl-b29b4a9b"><span class="cl-b299d278">20</span></p></td><td class="cl-b29b5b5d"><p class="cl-b29b4a9a"><span class="cl-b299d278">PL</span></p></td><td class="cl-b29b5b66"><p class="cl-b29b4a9b"><span class="cl-b299d278">73</span></p></td><td class="cl-b29b5b5d"><p class="cl-b29b4a9a"><span class="cl-b299d278"></span></p></td><td class="cl-b29b5b66"><p class="cl-b29b4a9b"><span class="cl-b299d278"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b29b5b67"><p class="cl-b29b4a9a"><span class="cl-b299d278">DK</span></p></td><td class="cl-b29b5b70"><p class="cl-b29b4a9b"><span class="cl-b299d278">11</span></p></td><td class="cl-b29b5b67"><p class="cl-b29b4a9a"><span class="cl-b299d278">IE</span></p></td><td class="cl-b29b5b70"><p class="cl-b29b4a9b"><span class="cl-b299d278">8</span></p></td><td class="cl-b29b5b67"><p class="cl-b29b4a9a"><span class="cl-b299d278">RO</span></p></td><td class="cl-b29b5b70"><p class="cl-b29b4a9b"><span class="cl-b299d278">42</span></p></td><td class="cl-b29b5b67"><p class="cl-b29b4a9a"><span class="cl-b299d278"></span></p></td><td class="cl-b29b5b70"><p class="cl-b29b4a9b"><span class="cl-b299d278"></span></p></td></tr></tbody></table></div>
</div>
</div>
</section>
<section id="oppgave-7" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-7">Oppgave 7</h4>
<p>Sjekk summary gdp_pc_n3. Hva er største og minste verdi? Har vi noen NA?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summary</span>(eu_data<span class="sc">$</span>gdp_pc_n3)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   2214   14994   21144   22782   27952  180416 </code></pre>
</div>
</div>
<p>Minsteverdi er 2 214, mens høyeste er 180 416. Ingen NA.</p>
</section>
<section id="oppgave-8" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-8">Oppgave 8</h4>
<p>Bruker case_when() for å legge til variabelen nc_name før vi går videre. Østerrike for AT, Belgia for BE etc..</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>eu_data <span class="ot">&lt;-</span> eu_data <span class="sc">|&gt;</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">nc_name =</span> <span class="fu">case_when</span>(</span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"AL"</span> <span class="sc">~</span> <span class="st">"Albania"</span>,</span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"AT"</span> <span class="sc">~</span> <span class="st">"Østerrike"</span>,</span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"BE"</span> <span class="sc">~</span> <span class="st">"Belgia"</span>,</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"BG"</span> <span class="sc">~</span> <span class="st">"Bulgaria"</span>,</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"CY"</span> <span class="sc">~</span> <span class="st">"Kypros"</span>,</span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"CZ"</span> <span class="sc">~</span> <span class="st">"Tjekkia"</span>,</span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"DE"</span> <span class="sc">~</span> <span class="st">"Tyskland"</span>,</span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"DK"</span> <span class="sc">~</span> <span class="st">"Danmark"</span>,</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"EE"</span> <span class="sc">~</span> <span class="st">"Estland"</span>,</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"EL"</span> <span class="sc">~</span> <span class="st">"Hellas"</span>,</span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"ES"</span> <span class="sc">~</span> <span class="st">"Spania"</span>,</span>
<span id="cb50-15"><a href="#cb50-15" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"FI"</span> <span class="sc">~</span> <span class="st">"Finland"</span>,</span>
<span id="cb50-16"><a href="#cb50-16" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"FR"</span> <span class="sc">~</span> <span class="st">"Frankrike"</span>,</span>
<span id="cb50-17"><a href="#cb50-17" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"HR"</span> <span class="sc">~</span> <span class="st">"Kroatia"</span>,</span>
<span id="cb50-18"><a href="#cb50-18" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"HU"</span> <span class="sc">~</span> <span class="st">"Ungarn"</span>,</span>
<span id="cb50-19"><a href="#cb50-19" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"IE"</span> <span class="sc">~</span> <span class="st">"Irland"</span>,</span>
<span id="cb50-20"><a href="#cb50-20" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"IT"</span> <span class="sc">~</span> <span class="st">"Italia"</span>,</span>
<span id="cb50-21"><a href="#cb50-21" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"LT"</span> <span class="sc">~</span> <span class="st">"Litauen"</span>,</span>
<span id="cb50-22"><a href="#cb50-22" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"LU"</span> <span class="sc">~</span> <span class="st">"Luxemburg"</span>,</span>
<span id="cb50-23"><a href="#cb50-23" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"LV"</span> <span class="sc">~</span> <span class="st">"Latvia"</span>,</span>
<span id="cb50-24"><a href="#cb50-24" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"MK"</span> <span class="sc">~</span> <span class="st">"Nord-Makedonia"</span>,</span>
<span id="cb50-25"><a href="#cb50-25" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"MT"</span> <span class="sc">~</span> <span class="st">"Malta"</span>,</span>
<span id="cb50-26"><a href="#cb50-26" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"PL"</span> <span class="sc">~</span> <span class="st">"Polen"</span>,</span>
<span id="cb50-27"><a href="#cb50-27" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"RO"</span> <span class="sc">~</span> <span class="st">"Romania"</span>,</span>
<span id="cb50-28"><a href="#cb50-28" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"RS"</span> <span class="sc">~</span> <span class="st">"Serbia"</span>,</span>
<span id="cb50-29"><a href="#cb50-29" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"SE"</span> <span class="sc">~</span> <span class="st">"Sverige"</span>,</span>
<span id="cb50-30"><a href="#cb50-30" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"SI"</span> <span class="sc">~</span> <span class="st">"Slovania"</span>,</span>
<span id="cb50-31"><a href="#cb50-31" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"SK"</span> <span class="sc">~</span> <span class="st">"Slovakia"</span>,</span>
<span id="cb50-32"><a href="#cb50-32" aria-hidden="true" tabindex="-1"></a>      nc <span class="sc">==</span> <span class="st">"TR"</span> <span class="sc">~</span> <span class="st">"Tyrkia"</span>,</span>
<span id="cb50-33"><a href="#cb50-33" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb50-34"><a href="#cb50-34" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb50-35"><a href="#cb50-35" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="beregning-av-gini" class="level2">
<h2 class="anchored" data-anchor-id="beregning-av-gini">Beregning av Gini</h2>
<section id="oppgave-9" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-9">Oppgave 9</h4>
<p>Bruk koden nedenfor til å beregne Gini-koeffisienter på NUTS2 nivå. Finn også antall NUTS3 regioner som finnes i hver NUTS2 region. Gi denne variabelen navnet num_reg_n2. Vi beregner også populasjon og gdp på NUTS2 nivå. Resultatet legger dere i en tibble kalt gini_n2.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>gini_n2 <span class="ot">&lt;-</span> eu_data <span class="sc">|&gt;</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">group_by</span>(n2, time, n1, nc, nc_name) <span class="sc">|&gt;</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">summarise</span>(</span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a> <span class="at">gini_n2 =</span> DescTools<span class="sc">::</span><span class="fu">Gini</span>(gdp_pc_n3, <span class="at">weights =</span> pop_n3, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a> <span class="at">pop_n2 =</span> <span class="fu">sum</span>(pop_n3),</span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a> <span class="at">gdp_n2 =</span> <span class="fu">sum</span>(gdp_n3),</span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a> <span class="at">gdp_pc_n2 =</span> gdp_n2 <span class="sc">/</span> pop_n2,</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a> <span class="at">num_reg_n2 =</span> <span class="fu">n</span>(),</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a> <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a> )<span class="sc">|&gt;</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gini_n2, <span class="dv">10</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 10
   n2    time  n1    nc    nc_name gini_n2 pop_n2    gdp_n2 gdp_pc_n2 num_reg_n2
   &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;     &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;      &lt;int&gt;
 1 AL01  2008  AL0   AL    Albania   0.166 889890    4.45e9     4997.          5
 2 AL01  2009  AL0   AL    Albania   0.153 879500    4.66e9     5297.          5
 3 AL01  2010  AL0   AL    Albania   0.159 871760    5.25e9     6022.          5
 4 AL01  2011  AL0   AL    Albania   0.148 864870    5.28e9     6104.          5
 5 AL01  2012  AL0   AL    Albania   0.119 857090    5.40e9     6304.          5
 6 AL01  2013  AL0   AL    Albania   0.122 848960    5.22e9     6153.          5
 7 AL01  2014  AL0   AL    Albania   0.103 840680    5.36e9     6371.          5
 8 AL01  2015  AL0   AL    Albania   0.114 833690    5.69e9     6824.          5
 9 AL01  2016  AL0   AL    Albania   0.109 828940    5.74e9     6922.          5
10 AL01  2017  AL0   AL    Albania   0.121 823370    5.90e9     7169.          5</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(gini_n2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>      n2                time                n1                 nc           
 Length:5724        Length:5724        Length:5724        Length:5724       
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            
   nc_name             gini_n2            pop_n2             gdp_n2         
 Length:5724        Min.   :0.00038   Min.   :   25740   Min.   :6.814e+08  
 Class :character   1st Qu.:0.06753   1st Qu.:  992732   1st Qu.:1.595e+10  
 Mode  :character   Median :0.10893   Median : 1529210   Median :3.030e+10  
                    Mean   :0.12316   Mean   : 1947314   Mean   :4.679e+10  
                    3rd Qu.:0.16290   3rd Qu.: 2361818   3rd Qu.:5.388e+10  
                    Max.   :0.47793   Max.   :15874440   Max.   :7.083e+11  
                    NA's   :856                                             
   gdp_pc_n2       num_reg_n2    
 Min.   : 3157   Min.   : 1.000  
 1st Qu.:15317   1st Qu.: 2.000  
 Median :21839   Median : 4.000  
 Mean   :23011   Mean   : 4.819  
 3rd Qu.:28793   3rd Qu.: 6.000  
 Max.   :96746   Max.   :23.000  
                                 </code></pre>
</div>
</div>
</section>
<section id="oppgave-10" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-10">Oppgave 10</h4>
<p>Sjekk obs. med Gini mindre enn 0.001. Er det noe som kjennetegner disse regionene?</p>
<p>For å løse denne gikk vi inn i R-objektet og filtrerte etter utregnet Gini. Når vi filtrerte etter Gini mellom 0 og 0,001 fikk vi 4 observasjoner:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>gini_n2 <span class="sc">%&gt;%</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(gini_n2 <span class="sc">&lt;</span> <span class="fl">0.001</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 10
  n2    time  n1    nc    nc_name   gini_n2  pop_n2  gdp_n2 gdp_pc_n2 num_reg_n2
  &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;      &lt;int&gt;
1 DK02  2019  DK0   DK    Danmark  0.000977  837050 2.32e10    27678.          2
2 ITF5  2006  ITF   IT    Italia   0.000545  588300 1.11e10    18935.          2
3 PL43  2011  PL4   PL    Polen    0.000854 1010350 1.43e10    14181.          2
4 SK03  2004  SK0   SK    Slovakia 0.000379 1352530 1.35e10     9967.          2</code></pre>
</div>
</div>
<p>De er spredt geografisk, i tid og har forskjellig GDP. Det de derimot har til felles, er at alle inneholder 2 NUTS3-regioner. At de har få regioner å regne ulikhet fra påvirker resultatet.</p>
</section>
<section id="oppgave-11" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-11">Oppgave 11</h4>
<p>Beregn Gini-koeffisienter på NUTS1 nivå (ut fra gdp_pc_n3og pop_n3). Legg resultatet i gini_n1. Et alternativ her ville vært å beregnet Gini fra gdp_pc_n2 og pop_n2 i NUTS1 regionene. Vi får imidlertid større spredning og trolig også et bedre mål på likhet/ulikhet ved å beregne Gini utfra gdp_pc_n3og pop_n3.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Trur denne er rett?</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>gini_n1 <span class="ot">&lt;-</span> eu_data <span class="sc">|&gt;</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(n1, time, nc, nc_name) <span class="sc">|&gt;</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gini_n1 =</span> DescTools<span class="sc">::</span><span class="fu">Gini</span>(gdp_pc_n3, <span class="at">weights =</span> pop_n3, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop_n1 =</span> <span class="fu">sum</span>(pop_n3, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">gdp_n1 =</span> <span class="fu">sum</span>(gdp_n3, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">gdp_pc_n1 =</span> gdp_n1 <span class="sc">/</span> pop_n1,</span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_reg_n1 =</span> <span class="fu">n_distinct</span>(n3),</span>
<span id="cb58-10"><a href="#cb58-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb58-11"><a href="#cb58-11" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb58-12"><a href="#cb58-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Vår summary:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>gini_n1 <span class="sc">|&gt;</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(gini_n1, num_reg_n1, gdp_n1, pop_n1, gdp_pc_n1) <span class="sc">|&gt;</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">summary</span>() <span class="sc">|&gt;</span></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">print</span>(<span class="at">width =</span> <span class="dv">76</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>    gini_n1          num_reg_n1        gdp_n1              pop_n1        
 Min.   :0.01601   Min.   : 1.00   Min.   :6.814e+08   Min.   :   25740  
 1st Qu.:0.09123   1st Qu.: 6.00   1st Qu.:4.256e+10   1st Qu.: 2689490  
 Median :0.13959   Median : 9.00   Median :7.888e+10   Median : 3934280  
 Mean   :0.15364   Mean   :12.22   Mean   :1.187e+11   Mean   : 4938602  
 3rd Qu.:0.18790   3rd Qu.:14.00   3rd Qu.:1.411e+11   3rd Qu.: 5992840  
 Max.   :0.42934   Max.   :96.00   Max.   :7.287e+11   Max.   :18031860  
 NA's   :177                                                             
   gdp_pc_n1    
 Min.   : 3802  
 1st Qu.:15750  
 Median :22295  
 Mean   :23523  
 3rd Qu.:29340  
 Max.   :90512  
                </code></pre>
</div>
</div>
<p>Ser lik ut som “fasit”. Great success! High five.</p>
</section>
<section id="oppgave-12" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-12">Oppgave 12</h4>
<p>Beregn Gini-koeffisienter (ut fra variasjon i verdiskapning på NUTS3 nivå) på nasjonsnivå. Legg resultatet i gini_nc.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>gini_nc <span class="ot">&lt;-</span> eu_data <span class="sc">|&gt;</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nc, nc_name, time) <span class="sc">|&gt;</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">gini_nc =</span> DescTools<span class="sc">::</span><span class="fu">Gini</span>(gdp_pc_n3, <span class="at">weights =</span> pop_n3, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">pop_nc =</span> <span class="fu">sum</span>(pop_n3, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">gdp_nc =</span> <span class="fu">sum</span>(gdp_n3, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">gdp_pc_nc =</span> gdp_nc <span class="sc">/</span> pop_nc,</span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">num_reg_nc =</span> <span class="fu">n_distinct</span>(n3),</span>
<span id="cb61-9"><a href="#cb61-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb61-10"><a href="#cb61-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb61-11"><a href="#cb61-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_tibble</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(gini_nc)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>      nc              nc_name              time              gini_nc      
 Length:651         Length:651         Length:651         Min.   :0.1111  
 Class :character   Class :character   Class :character   1st Qu.:0.1742  
 Mode  :character   Mode  :character   Mode  :character   Median :0.2094  
                                                          Mean   :0.2149  
                                                          3rd Qu.:0.2553  
                                                          Max.   :0.3991  
                                                          NA's   :46      
     pop_nc             gdp_nc            gdp_pc_nc       num_reg_nc    
 Min.   :  386200   Min.   :5.892e+09   Min.   : 4854   Min.   :  1.00  
 1st Qu.: 2810745   1st Qu.:4.350e+10   1st Qu.:15103   1st Qu.:  8.00  
 Median : 6984230   Median :1.516e+11   Median :22224   Median : 20.00  
 Mean   :17122006   Mean   :4.114e+11   Mean   :23761   Mean   : 42.37  
 3rd Qu.:11352985   3rd Qu.:3.447e+11   3rd Qu.:29362   3rd Qu.: 44.00  
 Max.   :84979990   Max.   :3.550e+12   Max.   :90512   Max.   :400.00  
                                                                        </code></pre>
</div>
</div>
<p>Denne ser også ut som løsningsforslaget.</p>
</section>
</section>
<section id="nestete-datastrukturer" class="level2">
<h2 class="anchored" data-anchor-id="nestete-datastrukturer">Nestete Datastrukturer</h2>
<section id="oppgave-13" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-13">Oppgave 13</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a>gini_n3_nest <span class="ot">&lt;-</span> eu_data <span class="sc">|&gt;</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">group_by</span>(nc_name, nc) <span class="sc">|&gt;</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">nest</span>(<span class="at">.key =</span> <span class="st">"NUTS3_data"</span>) <span class="sc">|&gt;</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">ungroup</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="oppgave-14" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-14">Oppgave 14</h4>
<p>Nest dataene på NUTS2 nivå. Legg resultatet gini_NUTS2_nest. Bruk .key = “NUTS2_data”.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>gini_n2_nest <span class="ot">&lt;-</span> gini_n2 <span class="sc">|&gt;</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nc_name, nc)<span class="sc">|&gt;</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">nest</span>(<span class="at">.key =</span> <span class="st">"NUTS2_data"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="oppgave-15" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-15">Oppgave 15</h4>
<p>«Nest» dataene på NUTS1 nivå. Legg resultatet gini_NUTS1_nest.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a>gini_n1_nest <span class="ot">&lt;-</span> gini_n1 <span class="sc">|&gt;</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">group_by</span>(nc_name, nc) <span class="sc">|&gt;</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">nest</span>(<span class="at">.key =</span> <span class="st">"NUTS1_data"</span>) <span class="sc">|&gt;</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">ungroup</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="oppgave-16" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-16">Oppgave 16</h4>
<p>«Nest» dataene på nasjonsnivå. Legg resultatet i gini_NUTSc_nest.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>gini_NUTSc_nest <span class="ot">&lt;-</span> gini_nc <span class="sc">|&gt;</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">group_by</span>(nc_name, nc) <span class="sc">|&gt;</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">nest</span>(<span class="at">.key =</span> <span class="st">"NUTSc_data"</span>) <span class="sc">|&gt;</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">ungroup</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="oppgave-17" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-17">Oppgave 17</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>gini_NUTSeu_nest <span class="ot">&lt;-</span> eu_data <span class="sc">|&gt;</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">group_by</span>(time) <span class="sc">|&gt;</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">summarise</span>(</span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a> <span class="at">gini_eu =</span> DescTools<span class="sc">::</span><span class="fu">Gini</span>(gdp_pc_n3, <span class="at">weights =</span> pop_n3, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a> <span class="at">num_reg_eu =</span> <span class="fu">n</span>(),</span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a> <span class="at">.groups =</span> <span class="st">"drop"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="oppgave-18" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-18">Oppgave 18</h4>
<p>Vis utviklingen i Gini-koeffisienten for NUTS3 regioner i EU vha. et linjeplot.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>gini_NUTSeu_nest <span class="sc">|&gt;</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.numeric</span>(time), <span class="at">y =</span> gini_eu)) <span class="sc">+</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"gini_eu"</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Arbeidskrav_4_DataScience_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="oppgave-19" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-19">Oppgave 19</h4>
<p>«The EU’s Structural Funds and Cohesion Fund direct funding to NUTS level 2 regions based on their GDP (PPS) per capita in comparison to the EU average: less developed regions (less than 75%), transition regions (between 75% and 90% and more developed regions (over 90%). For the period 2014–20, EUR 351 billion will be invested in the EU’s regions with most being directed to the less developed regions.» Basert på plottet fra foregående oppgave diskuter (veldig!) kort om tiltaket ser ut til å virke.</p>
<p>Basert på plottet over ser det ut som den regionale ulikheten i GDP synker, i tråd med målsetningen til EU. Trenden er vedvarende over tid, men det er vanskelig å si at overføringene har hatt en kausal effekt.</p>
</section>
<section id="oppgave-20" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-20">Oppgave 20</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a>eu_data_nested <span class="ot">&lt;-</span> gini_n3_nest <span class="sc">|&gt;</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(gini_n2_nest, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"nc"</span>, <span class="st">"nc_name"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(gini_n1_nest, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"nc"</span>, <span class="st">"nc_name"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(gini_NUTSc_nest, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"nc"</span>, <span class="st">"nc_name"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
</section>
<section id="plots-som-viser-utviklingen" class="level2">
<h2 class="anchored" data-anchor-id="plots-som-viser-utviklingen">Plots som viser utviklingen</h2>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>gini_nc <span class="sc">|&gt;</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">as.numeric</span>(time),</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> gini_nc,</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">group =</span> nc,</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> nc_name</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">lwd =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Utviklingen i Gini-koeffisienten på nasjonsnivå (29 land)"</span>) <span class="sc">+</span></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"time"</span>,</span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"gini_nc"</span>,</span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="cn">NULL</span></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 46 rows containing missing values or values outside the scale range
(`geom_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Arbeidskrav_4_DataScience_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<section id="oppgave-22" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-22">Oppgave 22</h4>
<p>Lag en sortert tabell for Gini i år 2022 som gjør det litt lettere å se hvilken linje som hører til hvilket land</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>gini_2022 <span class="ot">&lt;-</span> gini_nc <span class="sc">|&gt;</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(time <span class="sc">==</span> <span class="dv">2022</span>) <span class="sc">|&gt;</span></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(gini_nc)) <span class="sc">|&gt;</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nc_name, gini_nc)</span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Skriv ut tabellen</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>gini_2022 <span class="sc">|&gt;</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flextable</span>() <span class="sc">|&gt;</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_header_labels</span>(</span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">nc_name =</span> <span class="st">"Land"</span>,</span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">gini_nc =</span> <span class="st">"Gini-koeffisient"</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autofit</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-b34553be{}.cl-b3418e46{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-b342fee8{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b342fef2{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b3430e1a{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e24{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e25{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e26{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e2e{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e2f{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e30{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e38{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e39{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e42{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e43{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e44{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e4c{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e4d{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e4e{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e56{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e57{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e60{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e61{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e62{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e6a{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e6b{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e6c{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e74{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e75{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e7e{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e88{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e89{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e8a{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e92{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e93{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e9c{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e9d{width:1.415in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b3430e9e{width:1.296in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-b34553be"><thead><tr style="overflow-wrap:break-word;"><th class="cl-b3430e1a"><p class="cl-b342fee8"><span class="cl-b3418e46">Land</span></p></th><th class="cl-b3430e24"><p class="cl-b342fef2"><span class="cl-b3418e46">Gini-koeffisient</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-b3430e25"><p class="cl-b342fee8"><span class="cl-b3418e46">Irland</span></p></td><td class="cl-b3430e26"><p class="cl-b342fef2"><span class="cl-b3418e46">0.3990713</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e2e"><p class="cl-b342fee8"><span class="cl-b3418e46">Bulgaria</span></p></td><td class="cl-b3430e2f"><p class="cl-b342fef2"><span class="cl-b3418e46">0.3172612</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e30"><p class="cl-b342fee8"><span class="cl-b3418e46">Romania</span></p></td><td class="cl-b3430e38"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2998082</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e39"><p class="cl-b342fee8"><span class="cl-b3418e46">Latvia</span></p></td><td class="cl-b3430e42"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2981280</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e2e"><p class="cl-b342fee8"><span class="cl-b3418e46">Ungarn</span></p></td><td class="cl-b3430e2f"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2692496</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e43"><p class="cl-b342fee8"><span class="cl-b3418e46">Serbia</span></p></td><td class="cl-b3430e44"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2637424</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e4c"><p class="cl-b342fee8"><span class="cl-b3418e46">Tyrkia</span></p></td><td class="cl-b3430e4d"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2540632</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e30"><p class="cl-b342fee8"><span class="cl-b3418e46">Polen</span></p></td><td class="cl-b3430e38"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2302756</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e39"><p class="cl-b342fee8"><span class="cl-b3418e46">Malta</span></p></td><td class="cl-b3430e42"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2294089</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e4e"><p class="cl-b342fee8"><span class="cl-b3418e46">Litauen</span></p></td><td class="cl-b3430e56"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2259366</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e43"><p class="cl-b342fee8"><span class="cl-b3418e46">Slovakia</span></p></td><td class="cl-b3430e44"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2222795</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e39"><p class="cl-b342fee8"><span class="cl-b3418e46">Danmark</span></p></td><td class="cl-b3430e42"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2222566</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e57"><p class="cl-b342fee8"><span class="cl-b3418e46">Estland</span></p></td><td class="cl-b3430e60"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2180376</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e61"><p class="cl-b342fee8"><span class="cl-b3418e46">Nord-Makedonia</span></p></td><td class="cl-b3430e62"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2095793</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e30"><p class="cl-b342fee8"><span class="cl-b3418e46">Kroatia</span></p></td><td class="cl-b3430e38"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2085360</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e6a"><p class="cl-b342fee8"><span class="cl-b3418e46">Hellas</span></p></td><td class="cl-b3430e6b"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2077325</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e4e"><p class="cl-b342fee8"><span class="cl-b3418e46">Frankrike</span></p></td><td class="cl-b3430e56"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2062529</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e6c"><p class="cl-b342fee8"><span class="cl-b3418e46">Tjekkia</span></p></td><td class="cl-b3430e74"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2050454</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e75"><p class="cl-b342fee8"><span class="cl-b3418e46">Tyskland</span></p></td><td class="cl-b3430e7e"><p class="cl-b342fef2"><span class="cl-b3418e46">0.2024255</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e2e"><p class="cl-b342fee8"><span class="cl-b3418e46">Belgia</span></p></td><td class="cl-b3430e2f"><p class="cl-b342fef2"><span class="cl-b3418e46">0.1945446</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e39"><p class="cl-b342fee8"><span class="cl-b3418e46">Italia</span></p></td><td class="cl-b3430e42"><p class="cl-b342fef2"><span class="cl-b3418e46">0.1907755</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e43"><p class="cl-b342fee8"><span class="cl-b3418e46">Slovania</span></p></td><td class="cl-b3430e44"><p class="cl-b342fef2"><span class="cl-b3418e46">0.1690681</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e88"><p class="cl-b342fee8"><span class="cl-b3418e46">Spania</span></p></td><td class="cl-b3430e89"><p class="cl-b342fef2"><span class="cl-b3418e46">0.1340889</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e8a"><p class="cl-b342fee8"><span class="cl-b3418e46">Sverige</span></p></td><td class="cl-b3430e92"><p class="cl-b342fef2"><span class="cl-b3418e46">0.1263810</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e93"><p class="cl-b342fee8"><span class="cl-b3418e46">Østerrike</span></p></td><td class="cl-b3430e9c"><p class="cl-b342fef2"><span class="cl-b3418e46">0.1244962</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e25"><p class="cl-b342fee8"><span class="cl-b3418e46">Finland</span></p></td><td class="cl-b3430e26"><p class="cl-b342fef2"><span class="cl-b3418e46">0.1111034</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e4c"><p class="cl-b342fee8"><span class="cl-b3418e46">Kypros</span></p></td><td class="cl-b3430e4d"><p class="cl-b342fef2"><span class="cl-b3418e46"></span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b3430e9d"><p class="cl-b342fee8"><span class="cl-b3418e46">Luxemburg</span></p></td><td class="cl-b3430e9e"><p class="cl-b342fef2"><span class="cl-b3418e46"></span></p></td></tr></tbody></table></div>
</div>
</div>
</section>
<section id="oppgave-23" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-23">Oppgave 23</h4>
<p>Del landene i to grupper, dem som har lavere Gini i 2022 enn første året (dvs. utgjevning over tid mellom regionene) og dem som har høyere Gini i 2022 enn første året (dvs. større forskjeller mellom regionene). Vis utviklingen i de to gruppene vha. linjeplot.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>gini_compare <span class="ot">&lt;-</span> gini_nc <span class="sc">|&gt;</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nc, nc_name) <span class="sc">|&gt;</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">gini_first =</span> gini_nc[time <span class="sc">==</span> <span class="fu">min</span>(time)],</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gini_2022  =</span> gini_nc[time <span class="sc">==</span> <span class="dv">2022</span>],</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">gruppe =</span> <span class="fu">if_else</span>(</span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a>      gini_2022 <span class="sc">&lt;</span> gini_first,</span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Lavere Gini i 2022"</span>,</span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Høyere Gini i 2022"</span></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Returning more (or less) than 1 row per `summarise()` group was deprecated in
dplyr 1.1.0.
ℹ Please use `reframe()` instead.
ℹ When switching from `summarise()` to `reframe()`, remember that `reframe()`
  always returns an ungrouped data frame and adjust accordingly.</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>gini_nc_grouped <span class="ot">&lt;-</span> gini_nc <span class="sc">|&gt;</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>    gini_compare <span class="sc">|&gt;</span> <span class="fu">select</span>(nc, gruppe),</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">by =</span> <span class="st">"nc"</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>gini_nc_grouped <span class="sc">|&gt;</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(gruppe <span class="sc">==</span> <span class="st">"Lavere Gini i 2022"</span>) <span class="sc">|&gt;</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">as.numeric</span>(time),</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> gini_nc,</span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">group =</span> nc,</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> nc_name</span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">lwd =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"gini_nc"</span>,</span>
<span id="cb77-17"><a href="#cb77-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"nc_name"</span></span>
<span id="cb77-18"><a href="#cb77-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb77-19"><a href="#cb77-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Land med lavere regional ulikhet i 2022 enn første år vi har data for"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Arbeidskrav_4_DataScience_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a>gini_nc_grouped <span class="sc">|&gt;</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(gruppe <span class="sc">==</span> <span class="st">"Høyere Gini i 2022"</span>) <span class="sc">|&gt;</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">as.numeric</span>(time),</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> gini_nc,</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">group =</span> nc,</span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> nc_name</span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">lwd =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"right"</span>) <span class="sc">+</span></span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"gini_nc"</span>,</span>
<span id="cb78-17"><a href="#cb78-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"nc_name"</span></span>
<span id="cb78-18"><a href="#cb78-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb78-19"><a href="#cb78-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Land med høyere regional ulikhet i 2022 enn første år vi har data for"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Arbeidskrav_4_DataScience_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="oppgave-24" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-24">Oppgave 24</h4>
<p>Vis vha. et linjeplot utviklingen i gini-koeffisient for NUTS2 regionene i Irland.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>gini_n2 <span class="sc">|&gt;</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nc <span class="sc">==</span> <span class="st">"IE"</span>) <span class="sc">|&gt;</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">as.numeric</span>(time),</span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> gini_n2,</span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">group =</span> n2,</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> n2</span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">lwd =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb79-14"><a href="#cb79-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb79-15"><a href="#cb79-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"gini_n2"</span>,</span>
<span id="cb79-16"><a href="#cb79-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"n2"</span></span>
<span id="cb79-17"><a href="#cb79-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb79-18"><a href="#cb79-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Utviklingen i gini-koeffisienten for NUTS2-regionene i Irland"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Arbeidskrav_4_DataScience_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="hvordan-er-verdiskapningen-fordelt-mellom-regionene-i-ulike-land" class="level2">
<h2 class="anchored" data-anchor-id="hvordan-er-verdiskapningen-fordelt-mellom-regionene-i-ulike-land">Hvordan er verdiskapningen fordelt mellom regionene i ulike land?</h2>
<section id="spania" class="level3">
<h3 class="anchored" data-anchor-id="spania">Spania</h3>
<p>Spania hadde i år 2022 en Gini-koeffisient lik 0,134 som skulle tilsi en nokså jevn fordeling av økonomisk aktivitet mellom regionene.</p>
<section id="oppgave-25" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-25">Oppgave 25</h4>
</section>
<section id="lag-et-line-plot-som-viser-utviklingen-i-gini-koeffisientene-for-nuts2-regionene-i-spania." class="level4">
<h4 class="anchored" data-anchor-id="lag-et-line-plot-som-viser-utviklingen-i-gini-koeffisientene-for-nuts2-regionene-i-spania.">Lag et line-plot som viser utviklingen i Gini-koeffisientene for NUTS2 regionene i Spania.</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>gini_n2 <span class="sc">|&gt;</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nc <span class="sc">==</span> <span class="st">"ES"</span>) <span class="sc">|&gt;</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">as.numeric</span>(time),</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> gini_n2,</span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">group =</span> n2,</span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> n2</span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">lwd =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"gini_n2"</span>,</span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"n2"</span></span>
<span id="cb80-18"><a href="#cb80-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb80-19"><a href="#cb80-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Utviklingen i Gini-koeffisienten for NUTS2-regionene i Spania"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 184 rows containing missing values or values outside the scale range
(`geom_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Arbeidskrav_4_DataScience_files/figure-html/unnamed-chunk-58-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="oppgave-26" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-26">Oppgave 26</h4>
<p>Lag et line-plot som viser utviklingen i Gini-koeffisientene for NUTS1 regionene i Spania.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>gini_n1 <span class="sc">|&gt;</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nc <span class="sc">==</span> <span class="st">"ES"</span>) <span class="sc">|&gt;</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">as.numeric</span>(time),</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> gini_n1,</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">group =</span> n1,</span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> n1</span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">lwd =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb82-14"><a href="#cb82-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb82-15"><a href="#cb82-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb82-16"><a href="#cb82-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"gini_n1"</span>,</span>
<span id="cb82-17"><a href="#cb82-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"n1"</span></span>
<span id="cb82-18"><a href="#cb82-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb82-19"><a href="#cb82-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Utviklingen i Gini-koeffisienten for NUTS1-regionene i Spania"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 23 rows containing missing values or values outside the scale range
(`geom_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Arbeidskrav_4_DataScience_files/figure-html/unnamed-chunk-59-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Er det noe som karakteriserer de NUTS1 regionene som har hatt økt utgjevning?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>utjevning_es_n1 <span class="ot">&lt;-</span> gini_n1 <span class="sc">|&gt;</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nc <span class="sc">==</span> <span class="st">"ES"</span>) <span class="sc">|&gt;</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(n1) <span class="sc">|&gt;</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">gini_first =</span> gini_n1[time <span class="sc">==</span> <span class="fu">min</span>(time)],</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">gini_2022  =</span> gini_n1[time <span class="sc">==</span> <span class="dv">2022</span>],</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">endring =</span> gini_2022 <span class="sc">-</span> gini_first,</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(endring)</span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a>utjevning_es_n1</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
  n1    gini_first gini_2022  endring
  &lt;chr&gt;      &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;
1 ES7       0.0642    0.0248  -0.0393
2 ES1       0.0472    0.0221  -0.0250
3 ES4       0.0955    0.0753  -0.0202
4 ES2       0.0564    0.0432  -0.0132
5 ES6       0.0644    0.0535  -0.0109
6 ES5       0.0864    0.0973   0.0109
7 ES3     NaN       NaN      NaN     </code></pre>
</div>
</div>
<p>NUTS1-regionene som har hatt økt utjevning kjennetegnes ved at forskjellene i verdiskapning mellom deres underliggende NUTS3-regioner har blitt mindre over tid. Dette indikerer en mer balansert økonomisk utvikling innen regionene, der veksten i større grad har kommet flere delregioner til gode, og ikke bare vært i fokus i et spesifikt område.</p>
</section>
</section>
</section>
<section id="tyskland" class="level2">
<h2 class="anchored" data-anchor-id="tyskland">Tyskland</h2>
<p>Tyskland hadde i år 2020 en Gini-koeffisient lik 0,20 som skulle tilsi en nokså jevn fordeling av økonomisk aktivitet mellom regionene. Tyskland ligger likevel relativt høyt blandt landene vi har i vårt utvalg. Dette skulle indikere større spredning mellom regionene i Tyskland.</p>
<section id="oppgave-27" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-27">Oppgave 27</h4>
<p>Lag et line-plot som viser utviklingen i Gini-koeffisient for NUTS2 regionene i Tyskland. Dropp gjerne farger. Det er så mange regioner at de er vanskelig å skille.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>gini_n2 <span class="sc">|&gt;</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nc <span class="sc">==</span> <span class="st">"DE"</span>) <span class="sc">|&gt;</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">as.numeric</span>(time),</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> gini_n2,</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">group =</span> n2</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"black"</span>, <span class="at">linewidth =</span> <span class="fl">0.6</span>, <span class="at">alpha =</span> <span class="fl">0.8</span>) <span class="sc">+</span></span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb86-12"><a href="#cb86-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb86-13"><a href="#cb86-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb86-14"><a href="#cb86-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"gini_n2"</span></span>
<span id="cb86-15"><a href="#cb86-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb86-16"><a href="#cb86-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Utviklingen i Gini-koeffisienten for NUTS2-regionene i Tyskland"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 46 rows containing missing values or values outside the scale range
(`geom_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Arbeidskrav_4_DataScience_files/figure-html/unnamed-chunk-61-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Figuren viser at Gini-koeffisientene for NUTS2-regionene i Tyskland er fra rundt 0,03 til over 0,45. Dette indikerer store forskjeller i intern regional ulikhet. Regioner med lav Gini fremstår som ensartede når det gjelder verdiskapning mellom NUTS3-områder, mens regioner med høy Gini er preget av betydelige interne forskjeller. De største regionale ulikhetene finnes i hovedsak i og rundt de store økonomiske sentrene og storbyregionene. Dette et hvertfall i de vestlige og sørlige delene av landet, der de sterke kjerneområder eksisterer med mindre utviklede regioner.</p>
</section>
<section id="oppgave-28" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-28">Oppgave 28</h4>
<p>Er det samme er tilfelle når vi ser på de større regionene i Tyskland (NUTS1).</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a>gini_n1 <span class="sc">|&gt;</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nc <span class="sc">==</span> <span class="st">"DE"</span>) <span class="sc">|&gt;</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">as.numeric</span>(time),</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> gini_n1,</span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">group =</span> n1,</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> n1</span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span></span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb88-16"><a href="#cb88-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb88-17"><a href="#cb88-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb88-18"><a href="#cb88-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"gini_n1"</span>,</span>
<span id="cb88-19"><a href="#cb88-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"NUTS1"</span></span>
<span id="cb88-20"><a href="#cb88-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb88-21"><a href="#cb88-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Utviklingen i Gini-koeffisienten for NUTS1-regionene i Tyskland"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 46 rows containing missing values or values outside the scale range
(`geom_line()`).</code></pre>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Arbeidskrav_4_DataScience_files/figure-html/unnamed-chunk-62-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>eu_data_nested <span class="sc">|&gt;</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">unnest</span>(NUTS1_data) <span class="sc">|&gt;</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(nc_name <span class="sc">==</span> <span class="st">"Tyskland"</span>) <span class="sc">|&gt;</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(time <span class="sc">==</span> <span class="st">"2022"</span>) <span class="sc">|&gt;</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(n1, gini_n1, num_reg_n1) <span class="sc">|&gt;</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">arrange</span>(<span class="fu">desc</span>(gini_n1)) <span class="sc">|&gt;</span></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a> <span class="fu">flextable</span>() <span class="sc">|&gt;</span></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a> <span class="fu">line_spacing</span>(<span class="at">space =</span> <span class="fl">0.3</span>) <span class="sc">|&gt;</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a> <span class="fu">colformat_double</span>(<span class="at">j =</span> <span class="dv">2</span>, <span class="at">digits =</span> <span class="dv">4</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-b40f02cc{}.cl-b40b560e{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-b40ccc6e{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b40ccc78{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b40ccc82{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 0.3;background-color:transparent;}.cl-b40ccc83{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 0.3;background-color:transparent;}.cl-b40cdf92{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b40cdf9c{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b40cdf9d{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b40cdfa6{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b40cdfa7{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b40cdfa8{width:0.75in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-b40f02cc"><thead><tr style="overflow-wrap:break-word;"><th class="cl-b40cdf92"><p class="cl-b40ccc6e"><span class="cl-b40b560e">n1</span></p></th><th class="cl-b40cdf9c"><p class="cl-b40ccc78"><span class="cl-b40b560e">gini_n1</span></p></th><th class="cl-b40cdf9c"><p class="cl-b40ccc78"><span class="cl-b40b560e">num_reg_n1</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DEB</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">0.2529</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">36</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DE2</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">0.2477</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">96</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DE7</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">0.2394</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">26</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DE9</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">0.1978</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">45</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DE5</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">0.1790</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">2</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DE1</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">0.1726</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">44</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DEA</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">0.1616</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">53</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DEC</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">0.1445</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">6</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DEF</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">0.1421</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">15</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DE4</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">0.1291</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">18</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DEG</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">0.1196</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">22</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DED</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">0.1111</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">13</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DEE</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">0.0953</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">14</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DE8</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">0.0947</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">8</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdf9d"><p class="cl-b40ccc82"><span class="cl-b40b560e">DE3</span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e"></span></p></td><td class="cl-b40cdfa6"><p class="cl-b40ccc83"><span class="cl-b40b560e">1</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b40cdfa7"><p class="cl-b40ccc82"><span class="cl-b40b560e">DE6</span></p></td><td class="cl-b40cdfa8"><p class="cl-b40ccc83"><span class="cl-b40b560e"></span></p></td><td class="cl-b40cdfa8"><p class="cl-b40ccc83"><span class="cl-b40b560e">1</span></p></td></tr></tbody></table></div>
</div>
</div>
</section>
</section>
<section id="frankrike" class="level2">
<h2 class="anchored" data-anchor-id="frankrike">Frankrike</h2>
<p>Frankrike hadde i år 2022 en Gini-koeffisient lik 0,206 som også skulle tilsi en nokså jevn fordeling av økonomisk aktivitet mellom regionene. Frankrike ligger imidlertid høyt blant landene vi har i vårt utvalg.</p>
<section id="oppgave-29" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-29">Oppgave 29</h4>
<p>Vis utviklingen i Gini-koeffisient for NUTS1 regionene i Frankrike i et line-plot. Plottet vil se slik ut.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a>gini_n1 <span class="sc">|&gt;</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nc <span class="sc">==</span> <span class="st">"FR"</span>) <span class="sc">|&gt;</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">as.numeric</span>(time),</span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> gini_n1,</span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">group =</span> n1,</span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> n1</span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="fl">0.9</span>) <span class="sc">+</span></span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"bottom"</span></span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb91-16"><a href="#cb91-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb91-17"><a href="#cb91-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb91-18"><a href="#cb91-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"gini_n1"</span>,</span>
<span id="cb91-19"><a href="#cb91-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"NUTS1"</span></span>
<span id="cb91-20"><a href="#cb91-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb91-21"><a href="#cb91-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Utviklingen i Gini-koeffisienten for NUTS1-regionene i Frankrike"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Arbeidskrav_4_DataScience_files/figure-html/unnamed-chunk-64-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="oppgave-30" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-30">Oppgave 30</h4>
<p>Lag en tabell som viser de 6 NUTS1 sonene i Frankrike som hadde høyest Gini-koeffisient i 2022. Hvilken sone har suverent høyest Gini-koeffisient og hvor ligger denne i landet?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>gini_n1 <span class="sc">|&gt;</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nc <span class="sc">==</span> <span class="st">"FR"</span>, time <span class="sc">==</span> <span class="dv">2022</span>) <span class="sc">|&gt;</span></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(gini_n1)) <span class="sc">|&gt;</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">6</span>) <span class="sc">|&gt;</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(n1, gini_n1) <span class="sc">|&gt;</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flextable</span>() <span class="sc">|&gt;</span></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_header_labels</span>(</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">n1 =</span> <span class="st">"NUTS1-sone"</span>,</span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">gini_n1 =</span> <span class="st">"Gini-koeffisient (2022)"</span></span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autofit</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-b4362b68{}.cl-b432aa10{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-b4341d28{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b4341d32{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b4342d7c{width:1.168in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b4342d7d{width:1.78in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b4342d7e{width:1.168in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b4342d86{width:1.78in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b4342d87{width:1.168in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b4342d90{width:1.78in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b4342d91{width:1.168in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b4342d9a{width:1.78in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b4342d9b{width:1.168in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b4342d9c{width:1.78in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-b4362b68"><thead><tr style="overflow-wrap:break-word;"><th class="cl-b4342d7c"><p class="cl-b4341d28"><span class="cl-b432aa10">NUTS1-sone</span></p></th><th class="cl-b4342d7d"><p class="cl-b4341d32"><span class="cl-b432aa10">Gini-koeffisient (2022)</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-b4342d7e"><p class="cl-b4341d28"><span class="cl-b432aa10">FR1</span></p></td><td class="cl-b4342d86"><p class="cl-b4341d32"><span class="cl-b432aa10">0.3353556</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b4342d87"><p class="cl-b4341d28"><span class="cl-b432aa10">FRL</span></p></td><td class="cl-b4342d90"><p class="cl-b4341d32"><span class="cl-b432aa10">0.2018307</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b4342d87"><p class="cl-b4341d28"><span class="cl-b432aa10">FRK</span></p></td><td class="cl-b4342d90"><p class="cl-b4341d32"><span class="cl-b432aa10">0.1548922</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b4342d91"><p class="cl-b4341d28"><span class="cl-b432aa10">FRJ</span></p></td><td class="cl-b4342d9a"><p class="cl-b4341d32"><span class="cl-b432aa10">0.1341451</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b4342d87"><p class="cl-b4341d28"><span class="cl-b432aa10">FRM</span></p></td><td class="cl-b4342d90"><p class="cl-b4341d32"><span class="cl-b432aa10">0.1090546</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b4342d9b"><p class="cl-b4341d28"><span class="cl-b432aa10">FRF</span></p></td><td class="cl-b4342d9c"><p class="cl-b4341d32"><span class="cl-b432aa10">0.1025135</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>NUTS1-sonen i Frankrike som har høyest Gini-koeffisient i 2022 er FR1. Denne regionen ligger rundt Paris, og skiller seg ut med større interne regionale forskjeller enn resten av landet. Den høye Gini-koeffisienten reflekterer store forskjeller i verdiskapning mellom NUTS3-regionene i og rundt hovedstadsområdet, sammenlignet med mer homogene regioner ellers i Frankrike.</p>
</section>
<section id="oppgave-31" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-31">Oppgave 31</h4>
<p>Vi ser at for Frankrike er det en region som har klart større forskjeller mht. vekst (verdiskapning) enn de andre. Sjekk NUTS3 regionenen i denne regionen nærmere vha. linjeplot og lag en tabell som viser gdp_pc_n3 for de seks sonene.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Finn NUTS1-regionen i Frankrike med høyest Gini i 2022</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>top_fr_n1 <span class="ot">&lt;-</span> gini_n1 <span class="sc">|&gt;</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nc <span class="sc">==</span> <span class="st">"FR"</span>, time <span class="sc">==</span> <span class="dv">2022</span>) <span class="sc">|&gt;</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(gini_n1)) <span class="sc">|&gt;</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(n1)</span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot gdp per capita (NUTS3) over tid for NUTS3-sonene i denne NUTS1-regionen</span></span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>eu_data <span class="sc">|&gt;</span></span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nc <span class="sc">==</span> <span class="st">"FR"</span>, n1 <span class="sc">==</span> top_fr_n1) <span class="sc">|&gt;</span></span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb93-12"><a href="#cb93-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb93-13"><a href="#cb93-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="fu">as.numeric</span>(time),</span>
<span id="cb93-14"><a href="#cb93-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> gdp_pc_n3,</span>
<span id="cb93-15"><a href="#cb93-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">group =</span> n3,</span>
<span id="cb93-16"><a href="#cb93-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">colour =</span> n3</span>
<span id="cb93-17"><a href="#cb93-17" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb93-18"><a href="#cb93-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb93-19"><a href="#cb93-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">lwd =</span> <span class="fl">0.75</span>) <span class="sc">+</span></span>
<span id="cb93-20"><a href="#cb93-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb93-21"><a href="#cb93-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"bottom"</span>) <span class="sc">+</span></span>
<span id="cb93-22"><a href="#cb93-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb93-23"><a href="#cb93-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Year"</span>,</span>
<span id="cb93-24"><a href="#cb93-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"gdp_pc_n3"</span>,</span>
<span id="cb93-25"><a href="#cb93-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">colour =</span> <span class="st">"NUTS3"</span></span>
<span id="cb93-26"><a href="#cb93-26" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb93-27"><a href="#cb93-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="fu">paste0</span>(<span class="st">"GDP per capita (NUTS3) i "</span>, top_fr_n1, <span class="st">" (Frankrike)"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Arbeidskrav_4_DataScience_files/figure-html/unnamed-chunk-66-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>eu_data <span class="sc">|&gt;</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nc <span class="sc">==</span> <span class="st">"FR"</span>, n1 <span class="sc">==</span> top_fr_n1, time <span class="sc">==</span> <span class="dv">2022</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(gdp_pc_n3)) <span class="sc">|&gt;</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">6</span>) <span class="sc">|&gt;</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(n3, gdp_pc_n3) <span class="sc">|&gt;</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flextable</span>() <span class="sc">|&gt;</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_header_labels</span>(</span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">n3 =</span> <span class="st">"NUTS3-sone"</span>,</span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">gdp_pc_n3 =</span> <span class="st">"GDP per capita (2022)"</span></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">autofit</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div class="tabwid"><style>.cl-b45cc98a{}.cl-b458f27e{font-family:'Helvetica';font-size:11pt;font-weight:normal;font-style:normal;text-decoration:none;color:rgba(0, 0, 0, 1.00);background-color:transparent;}.cl-b45a8fb2{margin:0;text-align:left;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b45a8fbc{margin:0;text-align:right;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);padding-bottom:5pt;padding-top:5pt;padding-left:5pt;padding-right:5pt;line-height: 1;background-color:transparent;}.cl-b45aa3d0{width:1.168in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b45aa3da{width:1.814in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 1.5pt solid rgba(102, 102, 102, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b45aa3db{width:1.168in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b45aa3dc{width:1.814in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b45aa3dd{width:1.168in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b45aa3e4{width:1.814in;background-color:transparent;vertical-align: middle;border-bottom: 0 solid rgba(0, 0, 0, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b45aa3e5{width:1.168in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}.cl-b45aa3ee{width:1.814in;background-color:transparent;vertical-align: middle;border-bottom: 1.5pt solid rgba(102, 102, 102, 1.00);border-top: 0 solid rgba(0, 0, 0, 1.00);border-left: 0 solid rgba(0, 0, 0, 1.00);border-right: 0 solid rgba(0, 0, 0, 1.00);margin-bottom:0;margin-top:0;margin-left:0;margin-right:0;}</style><table data-quarto-disable-processing="true" class="cl-b45cc98a"><thead><tr style="overflow-wrap:break-word;"><th class="cl-b45aa3d0"><p class="cl-b45a8fb2"><span class="cl-b458f27e">NUTS3-sone</span></p></th><th class="cl-b45aa3da"><p class="cl-b45a8fbc"><span class="cl-b458f27e">GDP per capita (2022)</span></p></th></tr></thead><tbody><tr style="overflow-wrap:break-word;"><td class="cl-b45aa3db"><p class="cl-b45a8fb2"><span class="cl-b458f27e">FR101</span></p></td><td class="cl-b45aa3dc"><p class="cl-b45a8fbc"><span class="cl-b458f27e">113,522.65</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b45aa3db"><p class="cl-b45a8fb2"><span class="cl-b458f27e">FR105</span></p></td><td class="cl-b45aa3dc"><p class="cl-b45a8fbc"><span class="cl-b458f27e">101,546.46</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b45aa3db"><p class="cl-b45a8fb2"><span class="cl-b458f27e">FR107</span></p></td><td class="cl-b45aa3dc"><p class="cl-b45a8fbc"><span class="cl-b458f27e">38,624.91</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b45aa3dd"><p class="cl-b45a8fb2"><span class="cl-b458f27e">FR106</span></p></td><td class="cl-b45aa3e4"><p class="cl-b45a8fbc"><span class="cl-b458f27e">37,017.33</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b45aa3db"><p class="cl-b45a8fb2"><span class="cl-b458f27e">FR103</span></p></td><td class="cl-b45aa3dc"><p class="cl-b45a8fbc"><span class="cl-b458f27e">36,897.43</span></p></td></tr><tr style="overflow-wrap:break-word;"><td class="cl-b45aa3e5"><p class="cl-b45a8fb2"><span class="cl-b458f27e">FR104</span></p></td><td class="cl-b45aa3ee"><p class="cl-b45a8fbc"><span class="cl-b458f27e">36,840.11</span></p></td></tr></tbody></table></div>
</div>
</div>
<p>Resultatene viser at den høye Gini-koeffisienten i FR1 i stor grad skyldes svært store forskjeller mellom NUTS3-regionene i området rundt Paris. To regioner har et ekstremt høyt BNP per innbygger, mens de øvrige regionene ligger på et langt lavere nivå. Dette betyr at en stor del av verdiskapningen er konsentrert i noen få områder, mens resten av regionen har en mer moderat utvikling. Den sterke konsentrasjonen rundt hovedstadsområdet forklarer hvorfor FR1 skiller seg tydelig ut med høy regional ulikhet sammenlignet med andre deler av Frankrike.</p>
</section>
<section id="oppgave-32" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-32">Oppgave 32</h4>
<p>Kan vi utfra foregåenede plot og tabell si noe om årsaken til at FR1 har så høy Ginikoeffisient?</p>
<p>Kort svar, Ja. Ut fra plottet og tabellen våras kan vi si noe om årsaken til den høye Gini-koeffisienten i FR1. Verdiskapningen er svært ulikt fordelt mellom NUTS3-regionene i området. Noen få regioner rundt Paris har ekstremt høyt BNP per innbygger, mens resten ligger betydelig lavere. Denne sterke konsentrasjonen av økonomisk aktivitet i enkelte områder gjør at forskjellene innad i regionen blir store, og forklarer hvorfor FR1 har så høy Gini-koeffisient.</p>
</section>
</section>
<section id="enkle-modeller" class="level1">
<h1>Enkle modeller</h1>
<section id="data-science-modeller" class="level2">
<h2 class="anchored" data-anchor-id="data-science-modeller">«Data Science» modeller</h2>
<section id="oppgave-33" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-33">Oppgave 33</h4>
<p>Lag datasett for endringer i gdp_per_capita og gini_nuts2</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>n3_data <span class="ot">&lt;-</span> eu_data_nested <span class="sc">|&gt;</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">unnest</span>(NUTS3_data) <span class="sc">|&gt;</span></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(nc_name, n2, n3, time, gdp_pc_n3)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>n2_data <span class="ot">&lt;-</span> eu_data_nested <span class="sc">|&gt;</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">unnest</span>(NUTS2_data) <span class="sc">|&gt;</span></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(nc_name, n2, time, gini_n2)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a>NUTS2_diff <span class="ot">&lt;-</span> n3_data <span class="sc">|&gt;</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">left_join</span>(n2_data, <span class="at">by =</span> <span class="fu">join_by</span>(nc_name, n2, time)) <span class="sc">|&gt;</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a> <span class="at">diff_gdp_per_capita =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">100</span> <span class="sc">*</span> <span class="fu">diff</span>(gdp_pc_n3)),</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a> <span class="at">diff_gini_nuts2 =</span> <span class="fu">c</span>(<span class="cn">NA</span>, <span class="dv">100</span> <span class="sc">*</span> <span class="fu">diff</span>(gini_n2))</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a> ) <span class="sc">%&gt;%</span></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(<span class="fu">complete.cases</span>(.)) <span class="sc">|&gt;</span></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a> <span class="fu">group_by</span>(nc_name, n2) <span class="sc">|&gt;</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a> <span class="fu">nest</span>(<span class="at">.key =</span> <span class="st">"NUTS2_diff"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<p>Vi har totalt 256 NUTS2 regioner men bare:</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">unnest</span>(NUTS2_diff, NUTS2_diff) <span class="sc">|&gt;</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.nan</span>(gini_n2)) <span class="sc">|&gt;</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(n2) <span class="sc">|&gt;</span></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">distinct</span>() <span class="sc">|&gt;</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">nrow</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 218</code></pre>
</div>
</div>
<p>av disse har vi kunnet beregne Gini-koeffisient for. Vi har altså 38 NUTS2 soner som bare inneholder én NUTS3 sone.</p>
</section>
<section id="oppgave-34" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-34">Oppgave 34</h4>
<p>Bruk modellen diff_gini_nuts2 ~ diff_gdp_per_capita på hver av de 256 (218) NUTS2 regionene vha. en anonym funksjon som «mappes» (vha. map()) på «list-column» NUTS2_diff. Legg resultatet i en variabel modell.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>NUTS2_diff <span class="ot">&lt;-</span> NUTS2_diff <span class="sc">|&gt;</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">modell =</span> <span class="fu">map</span>(</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">.x =</span> NUTS2_diff,</span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">.f =</span> <span class="cf">function</span>(a_df) <span class="fu">lm</span>(diff_gini_nuts2 <span class="sc">~</span> diff_gdp_per_capita, <span class="at">data =</span> a_df)</span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="oppgave-35" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-35">Oppgave 35</h4>
<p>Hent ut koeffisientene fra de 256 (218) modellene og legg resultatet i variabelen mod_coeff. Gjør dette ved å «mappe» funksjonen coeff() på list_column modell. (Hint: Husk at hvis vi ønsker en dataframe så må _df varianten av mapbrukes. Nå er map_df() blitt «superseded» i Tidyverse, dvs. at den ikke lengre blir utviklet og brukerne er oppfordret til å bruke map() som returnerer en liste. Her betyr det av vi bytter ut map_df(.x =, .f =) med bind_rows(map(.x =, .f =)).</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>mod_coeff <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(</span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">.x =</span> NUTS2_diff<span class="sc">$</span>modell,</span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">.f =</span> coef</span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="oppgave-36" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-36">Oppgave 36</h4>
<p>Brukk glance() funksjonen fra broom pakken og «map» denne på modell variabelen for å generere «model summary». Legg resultatet i en variabel mod_sum.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a>NUTS2_diff <span class="ot">&lt;-</span> NUTS2_diff <span class="sc">|&gt;</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">group_by</span>(nc_name, n2) <span class="sc">|&gt;</span></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(</span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a> <span class="at">mod_sum =</span> <span class="fu">bind_rows</span>(</span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">map</span>(</span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a> <span class="at">.x =</span> modell,</span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a> <span class="at">.f =</span> glance</span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a> )</span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a> )</span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a> )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
</section>
<section id="oppgave-37" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-37">Oppgave 37</h4>
<p>Hvilken NUTS1 sone har høyest R² for vår modell og hvilken sone har lavest.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Lag mod_sum og mod_coeff som list-columns (én per NUTS2-region)</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>NUTS2_diff2 <span class="ot">&lt;-</span> NUTS2_diff <span class="sc">|&gt;</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">mod_sum   =</span> <span class="fu">map</span>(modell, glance),</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">mod_coeff =</span> <span class="fu">map</span>(modell, coef)</span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a><span class="co">#Gjør mod_sum "flat" så r.squared blir en vanlig kolonne</span></span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a>mods_flat <span class="ot">&lt;-</span> NUTS2_diff2 <span class="sc">|&gt;</span></span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(mod_sum) <span class="sc">|&gt;</span></span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.finite</span>(r.squared))</span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-14"><a href="#cb103-14" aria-hidden="true" tabindex="-1"></a><span class="co">#Høyest og lavest R^2</span></span>
<span id="cb103-15"><a href="#cb103-15" aria-hidden="true" tabindex="-1"></a>hoyest_R2 <span class="ot">&lt;-</span> mods_flat <span class="sc">|&gt;</span></span>
<span id="cb103-16"><a href="#cb103-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(r.squared)) <span class="sc">|&gt;</span></span>
<span id="cb103-17"><a href="#cb103-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb103-18"><a href="#cb103-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nc_name, n2, r.squared)</span>
<span id="cb103-19"><a href="#cb103-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-20"><a href="#cb103-20" aria-hidden="true" tabindex="-1"></a>lavest_R2 <span class="ot">&lt;-</span> mods_flat <span class="sc">|&gt;</span></span>
<span id="cb103-21"><a href="#cb103-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(r.squared) <span class="sc">|&gt;</span></span>
<span id="cb103-22"><a href="#cb103-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span></span>
<span id="cb103-23"><a href="#cb103-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nc_name, n2, r.squared)</span>
<span id="cb103-24"><a href="#cb103-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-25"><a href="#cb103-25" aria-hidden="true" tabindex="-1"></a>hoyest_R2</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  nc_name n2    r.squared
  &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;
1 Polen   PL82      0.772</code></pre>
</div>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a>lavest_R2</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  nc_name n2    r.squared
  &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt;
1 Italia  ITH3   0.000102</code></pre>
</div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a>mods_flat <span class="sc">|&gt;</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(r.squared)) <span class="sc">|&gt;</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nc_name, n2, NUTS2_diff, modell, mod_coeff, r.squared)<span class="sc">|&gt;</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(mod_coeff)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  nc_name  n2    NUTS2_diff        modell   mod_coeff r.squared
  &lt;chr&gt;    &lt;chr&gt; &lt;list&gt;            &lt;list&gt;       &lt;dbl&gt;     &lt;dbl&gt;
1 Polen    PL82  &lt;tibble [92 × 6]&gt; &lt;lm&gt;   -0.0364         0.772
2 Polen    PL82  &lt;tibble [92 × 6]&gt; &lt;lm&gt;    0.00000669     0.772
3 Tyskland DED5  &lt;tibble [69 × 6]&gt; &lt;lm&gt;    0.00344        0.701
4 Tyskland DED5  &lt;tibble [69 × 6]&gt; &lt;lm&gt;   -0.00000454     0.701
5 Belgia   BE22  &lt;tibble [60 × 6]&gt; &lt;lm&gt;    0.129          0.692
6 Belgia   BE22  &lt;tibble [60 × 6]&gt; &lt;lm&gt;   -0.00000312     0.692</code></pre>
</div>
</div>
</section>
<section id="oppgave-38" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-38">Oppgave 38</h4>
<p>Hvilken NUTS1 sone har høyest koeffisient for diff_gdp_per_capita?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>mods_flat <span class="sc">|&gt;</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(mod_coeff)<span class="sc">|&gt;</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mod_coeff)) <span class="sc">|&gt;</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nc_name, n2, NUTS2_diff, modell, mod_coeff, r.squared)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 436 × 6
   nc_name  n2    NUTS2_diff        modell mod_coeff r.squared
   &lt;chr&gt;    &lt;chr&gt; &lt;list&gt;            &lt;list&gt;     &lt;dbl&gt;     &lt;dbl&gt;
 1 Albania  AL02  &lt;tibble [28 × 6]&gt; &lt;lm&gt;       0.932  0.105   
 2 Polen    PL91  &lt;tibble [69 × 6]&gt; &lt;lm&gt;       0.430  0.0236  
 3 Romania  RO32  &lt;tibble [46 × 6]&gt; &lt;lm&gt;       0.404  0.448   
 4 Danmark  DK03  &lt;tibble [46 × 6]&gt; &lt;lm&gt;       0.283  0.00307 
 5 Irland   IE06  &lt;tibble [68 × 6]&gt; &lt;lm&gt;       0.271  0.579   
 6 Slovakia SK04  &lt;tibble [46 × 6]&gt; &lt;lm&gt;       0.222  0.458   
 7 Tyrkia   TR42  &lt;tibble [95 × 6]&gt; &lt;lm&gt;       0.216  0.000890
 8 Tjekkia  CZ04  &lt;tibble [46 × 6]&gt; &lt;lm&gt;       0.207  0.0923  
 9 Hellas   EL42  &lt;tibble [46 × 6]&gt; &lt;lm&gt;       0.203  0.0847  
10 Sverige  SE23  &lt;tibble [46 × 6]&gt; &lt;lm&gt;       0.196  0.247   
# ℹ 426 more rows</code></pre>
</div>
</div>
<p>NUTS2-regionen med høyest koeffisient: AL02 i Albania.</p>
</section>
<section id="oppgave-39" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-39">Oppgave 39</h4>
<p>Hvor mange av de 256 (218) koeffisientene er signifikante på 5% nivå?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Hent ut koeffisient-estimat og p-verdi fra alle modellene</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>coef_tidy <span class="ot">&lt;-</span> NUTS2_diff2 <span class="sc">|&gt;</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(nc_name, n2, modell) <span class="sc">|&gt;</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">tidy_coef =</span> <span class="fu">map</span>(modell, tidy)</span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(tidy_coef) <span class="sc">|&gt;</span></span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(term <span class="sc">==</span> <span class="st">"diff_gdp_per_capita"</span>) <span class="sc">|&gt;</span></span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.finite</span>(p.value))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</div>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a>coef_tidy <span class="sc">|&gt;</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalt_antall =</span> <span class="fu">n</span>(),</span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">signifikante_5pct =</span> <span class="fu">sum</span>(p.value <span class="sc">&lt;</span> <span class="fl">0.05</span>),</span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">andel_signifikante =</span> <span class="fu">mean</span>(p.value <span class="sc">&lt;</span> <span class="fl">0.05</span>)</span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  totalt_antall signifikante_5pct andel_signifikante
          &lt;int&gt;             &lt;int&gt;              &lt;dbl&gt;
1           218               162              0.743</code></pre>
</div>
</div>
<p>Av de totale 218 regioner var 162 modeller statistisk signifikante på 5 % nivå. Det betyr at for rundt 3 av 4 regioner er sammenhengen mellom endringer i BNP per innbygger og endringer i regional ulikhet ikke tilfeldig, men målbar i dataene.</p>
</section>
<section id="oppgave-40" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-40">Oppgave 40</h4>
<p>Bruk ggplot til å lage et «density plot» av variabelen diff_gdp_per_capita. Legg inn en vertikal linje for gjennomsnitt diff_gdp_per_capita. (Hint! Husk argumentet na.rm = TRUE.). Resultatet skal bli som i plottet under.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb114"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a>coef_tidy <span class="sc">|&gt;</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> estimate)) <span class="sc">+</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">na.rm =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(</span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">xintercept =</span> <span class="fu">mean</span>(coef_tidy<span class="sc">$</span>estimate, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">linetype =</span> <span class="st">"dashed"</span></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"diff_gdp_per_capita"</span>,</span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Density"</span>,</span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Tetthetsplot av diff_gdp_per_capita"</span></span>
<span id="cb114-13"><a href="#cb114-13" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="Arbeidskrav_4_DataScience_files/figure-html/unnamed-chunk-80-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="oppgave-41" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-41">Oppgave 41</h4>
<p>Hvor mange av de 256 (218) regrersjonskoeffisientene for diff_gdp_per_capita er positive?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>coef_tidy <span class="sc">|&gt;</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">totalt_antall =</span> <span class="fu">n</span>(),</span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">antall_positive =</span> <span class="fu">sum</span>(estimate <span class="sc">&gt;</span> <span class="dv">0</span>),</span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">andel_positive =</span> <span class="fu">mean</span>(estimate <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  totalt_antall antall_positive andel_positive
          &lt;int&gt;           &lt;int&gt;          &lt;dbl&gt;
1           218             132          0.606</code></pre>
</div>
</div>
<p>Svaret visar et flertall av NUTS2-regionene på om lag 61 %, som er sammenhengen mellom endringer i BNP per innbygger og endringer i regional ulikhet positiv.</p>
</section>
<section id="oppgave-42" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-42">Oppgave 42</h4>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>coef_tidy <span class="sc">|&gt;</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_coef   =</span> <span class="fu">mean</span>(estimate),</span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">median_coef =</span> <span class="fu">median</span>(estimate)</span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
    mean_coef median_coef
        &lt;dbl&gt;       &lt;dbl&gt;
1 0.000000816 0.000000528</code></pre>
</div>
</div>
</section>
<section id="oppgave-43" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-43">Oppgave 43</h4>
<p>Utfør en enkel t-test for å teste om diff_gdp_per_capita er signifikant større enn 0. Er diff_gdp_per_capita signifikant større enn 0?</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">t.test</span>(</span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>  coef_tidy<span class="sc">$</span>estimate,</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mu =</span> <span class="dv">0</span>,</span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">alternative =</span> <span class="st">"greater"</span></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    One Sample t-test

data:  coef_tidy$estimate
t = 3.7658, df = 217, p-value = 0.0001069
alternative hypothesis: true mean is greater than 0
95 percent confidence interval:
 4.583272e-07          Inf
sample estimates:
  mean of x 
8.16482e-07 </code></pre>
</div>
</div>
</section>
</section>
<section id="panel-modell" class="level2">
<h2 class="anchored" data-anchor-id="panel-modell">Panel modell</h2>
<section id="oppgave-44" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-44">Oppgave 44</h4>
<p>Bruk funksjonen plm() fra pakken plm til å utføre en panel-regresjon på dataene. For argumentet index kan dere bruke index = c(“n3”, “time”). Bruk samme enkle modell som ovenfor dvs. diff_gini_nuts2 ~ diff_gdp_per_capita. Putt resultatet av regresjonen i et objekt p_mod.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Her skjærer det seg.Lag-funksjonen fungerer ikke, av en eller annen grunn. Har prøvd å debugge både vha. Claude og ChatGPT i timesvis, til ingen nytte. Dette lager følgefeil for resten av panelestimeringen.</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a>panel_n3 <span class="ot">&lt;-</span> n3_data <span class="sc">%&gt;%</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(n2_data, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"nc_name"</span>, <span class="st">"n2"</span>, <span class="st">"time"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time =</span> <span class="fu">as.integer</span>(time)) <span class="sc">%&gt;%</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(nc_name, n3, time) <span class="sc">%&gt;%</span>  <span class="co"># Sort BEFORE grouping</span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(nc_name, n3) <span class="sc">%&gt;%</span></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">gdp_pc_lag  =</span> <span class="fu">lag</span>(gdp_pc_n3, <span class="dv">1</span>),</span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">gini_n2_lag =</span> <span class="fu">lag</span>(gini_n2, <span class="dv">1</span>)</span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff_gdp_per_capita =</span> <span class="dv">100</span> <span class="sc">*</span> (gdp_pc_n3 <span class="sc">-</span> <span class="fu">lag</span>(gdp_pc_n3)),</span>
<span id="cb121-13"><a href="#cb121-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">diff_gini_nuts2     =</span> <span class="dv">100</span> <span class="sc">*</span> (gini_n2 <span class="sc">-</span> <span class="fu">lag</span>(gini_n2))</span>
<span id="cb121-14"><a href="#cb121-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb121-15"><a href="#cb121-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb121-16"><a href="#cb121-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(diff_gdp_per_capita), <span class="sc">!</span><span class="fu">is.na</span>(diff_gini_nuts2)) <span class="sc">%&gt;%</span></span>
<span id="cb121-17"><a href="#cb121-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">time =</span> <span class="fu">as.numeric</span>(time))</span>
<span id="cb121-18"><a href="#cb121-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-19"><a href="#cb121-19" aria-hidden="true" tabindex="-1"></a>p_mod <span class="ot">&lt;-</span> <span class="fu">plm</span>(</span>
<span id="cb121-20"><a href="#cb121-20" aria-hidden="true" tabindex="-1"></a>  diff_gini_nuts2 <span class="sc">~</span> diff_gdp_per_capita,</span>
<span id="cb121-21"><a href="#cb121-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">data  =</span> panel_n3,</span>
<span id="cb121-22"><a href="#cb121-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">index =</span> <span class="fu">c</span>(<span class="st">"n3"</span>, <span class="st">"time"</span>),</span>
<span id="cb121-23"><a href="#cb121-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">model =</span> <span class="st">"pooling"</span></span>
<span id="cb121-24"><a href="#cb121-24" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb121-25"><a href="#cb121-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-26"><a href="#cb121-26" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(p_mod)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Pooling Model

Call:
plm(formula = diff_gini_nuts2 ~ diff_gdp_per_capita, data = panel_n3, 
    model = "pooling", index = c("n3", "time"))

Unbalanced Panel: n = 1186, T = 14-23, N = 26728

Residuals:
   Min. 1st Qu.  Median 3rd Qu.    Max. 
      0       0       0       0       0 

Coefficients:
            Estimate Std. Error t-value Pr(&gt;|t|)
(Intercept)        0          0     NaN      NaN

Total Sum of Squares:    0
Residual Sum of Squares: 0
R-Squared:      NaN
Adj. R-Squared: NaN</code></pre>
</div>
</div>
</section>
<section id="oppgave-45" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-45">Oppgave 45</h4>
<p>Vis summary() for p_mod og tolk resultatet.</p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(p_mod)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Pooling Model

Call:
plm(formula = diff_gini_nuts2 ~ diff_gdp_per_capita, data = panel_n3, 
    model = "pooling", index = c("n3", "time"))

Unbalanced Panel: n = 1186, T = 14-23, N = 26728

Residuals:
   Min. 1st Qu.  Median 3rd Qu.    Max. 
      0       0       0       0       0 

Coefficients:
            Estimate Std. Error t-value Pr(&gt;|t|)
(Intercept)        0          0     NaN      NaN

Total Sum of Squares:    0
Residual Sum of Squares: 0
R-Squared:      NaN
Adj. R-Squared: NaN</code></pre>
</div>
</div>
</section>
<section id="oppgave-46" class="level4">
<h4 class="anchored" data-anchor-id="oppgave-46">Oppgave 46</h4>
<p>En alternativ måte å finne summary() for p_mod er gjengitt i chunk-en nedenfor. <strong>Forklar hva som blir gjort her og sammenlign med resultatet av en ordinær summary().</strong></p>
<div class="cell">
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(</span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a>  p_mod,</span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">vcov =</span> <span class="cf">function</span>(x) plm<span class="sc">::</span><span class="fu">vcovHC</span>(x, <span class="at">method =</span> <span class="st">"white2"</span>)</span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
<div class="cell-output cell-output-stdout">
<pre><code>Pooling Model

Note: Coefficient variance-covariance matrix supplied: function(x) plm::vcovHC(x, method = "white2")

Call:
plm(formula = diff_gini_nuts2 ~ diff_gdp_per_capita, data = panel_n3, 
    model = "pooling", index = c("n3", "time"))

Unbalanced Panel: n = 1186, T = 14-23, N = 26728

Residuals:
   Min. 1st Qu.  Median 3rd Qu.    Max. 
      0       0       0       0       0 

Coefficients:
            Estimate Std. Error t-value Pr(&gt;|t|)
(Intercept)        0          0     NaN      NaN

Total Sum of Squares:    0
Residual Sum of Squares: 0
R-Squared:      NaN
Adj. R-Squared: NaN</code></pre>
</div>
</div>
</section>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>